{\rtf1\mac\ansicpg10000\cocoartf100
{\fonttbl\f0\fnil\fcharset77 Monaco;}
{\colortbl;\red255\green255\blue255;\red191\green0\blue0;\red0\green0\blue0;\red96\green96\blue96;
\red0\green0\blue191;\red0\green115\blue0;}
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural

\f0\fs18 \cf2 // this stuff is not up to date\
\cf3 \
unixCmd(\cf4 "engine/supercollider_synth -u 57110 >synth_log &"\cf3 );\
unixCmd(\cf4 "engine/supercollider_synth -u 57112 >synth_log &"\cf3 );\
\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/notify"\cf3 , 1);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57112).sendMsg(\cf4 "/notify"\cf3 , 1);\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/start"\cf3 );\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57112).sendMsg(\cf4 "/start"\cf3 );\
\
\
\
(\
\cf5 SynthDef\cf3 (\cf4 "trem"\cf3 , \{ \cf5 arg\cf3  freq=800, rate=8, amp=0.1; \
	\cf5 var\cf3  osc;\
	osc = \cf5 LFTri\cf3 .ar(freq, 0, \cf5 SinOsc\cf3 .kr( rate + [0,0.1],0,amp).max(0));\
	\cf5 Out\cf3 .ar(0, osc.postln) \
\}).writeDefFile;\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/d_load"\cf3 , \cf4 "server/synthdefs/trem.scsyndef"\cf3 );\
)\
\
(\
\cf5 SynthDef\cf3 (\cf4 "trem1"\cf3 , \{ \cf5 arg\cf3  freq=800, amp=0.1; \
	\cf5 var\cf3  osc, rate;\
	rate = \cf5 Line\cf3 .ar(4,12,8);\
	osc = \cf5 SinOsc\cf3 .ar(freq, 0, \cf5 SinOsc\cf3 .ar( rate + [0,0.1,0.2,0.3],0,amp).max(0));\
	\cf5 Out\cf3 .ar(0, \cf5 Mix\cf3 (osc)) \
\}).writeDefFile;\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/d_load"\cf3 , \cf4 "server/synthdefs/trem.scsyndef"\cf3 );\
)\
\
\
\cf2 //	simple parameter window.\
//	simple instrument\
//		synth def\
//		make window.\
//		\
//		button to start, button to stop.\
//			stop by gate, stop by free, stop by fade+free\
//	getFile putFile numberbox\
//	\
//	simple instrument\
//		synth def\
//		param def\
//			name, spec, guispec\
//		makewindow\
//			button to start/stop\
//			store preset\
//			recall preset\
//			preset number\
//			save presets putFile - save with name of instrument - as archive\
//			load presets getFile - load with name of instrument - as archive\
//	\
\cf3 \
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/quit"\cf3 );\
\
(\
\cf5 var\cf3  server, w, b1, b2, b3, serverRunning = \cf5 false\cf3 ;\
server = \cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110);	\
w = \cf5 SCWindow\cf3 (\cf4 "server control"\cf3 , \cf5 Rect\cf3 (128, 64, 260, 80));\
w.view.decorator = \cf5 FlowLayout\cf3 (w.view.bounds);\
\
b1 = \cf5 SCButton\cf3 (w, \cf5 Rect\cf3 (0,0, 80, 24));\
b1.states = [\
	[\cf4 "Start Server"\cf3 , \cf5 Color\cf3 .black, \cf5 Color\cf3 .green],\
	[\cf4 "Stop Server"\cf3 , \cf5 Color\cf3 .white, \cf5 Color\cf3 .red]];\
b1.action = \{ \cf5 arg\cf3  view; \
	if (view.value == 1, \{\
		b2.enabled = \cf5 true\cf3 ;\
		b3.enabled = \cf5 true\cf3 ;\
		b2.value = 0;\
		unixCmd(\cf4 "engine/supercollider_synth -u 57110 >synth_log &"\cf3 );\
		serverRunning = \cf5 true\cf3 ;\
	\},\{\
		server.sendMsg(\cf4 "/quit"\cf3 );\
		serverRunning = \cf5 false\cf3 ;\
		b2.enabled = \cf5 false\cf3 ;\
		b3.enabled = \cf5 false\cf3 ;\
	\});\
\};\
\
b2 = \cf5 SCButton\cf3 (w, \cf5 Rect\cf3 (0,0, 80, 24));\
\
b2.states = [\
	[\cf4 "Start Audio"\cf3 , \cf5 Color\cf3 .black, \cf5 Color\cf3 .green],\
	[\cf4 "Stop Audio"\cf3 , \cf5 Color\cf3 .white, \cf5 Color\cf3 .red]];\
b2.action = \{ \cf5 arg\cf3  view; \
	if (view.value == 1, \{\
		if (serverRunning, \{ server.sendMsg(\cf4 "/start"\cf3 ); \});\
	\},\{\
		if (serverRunning, \{ server.sendMsg(\cf4 "/stop"\cf3 ); \});\
	\});\
\};\
\
b3 = \cf5 SCButton\cf3 (w, \cf5 Rect\cf3 (0,0, 80, 24));\
b3.states = [[\cf4 "Status"\cf3 , \cf5 Color\cf3 .black, \cf5 Color\cf3 .grey(0.9)]];\
b3.action = \{ \
	if (serverRunning, \{ server.sendMsg(\cf4 "/status"\cf3 ); \}) \
\};\
\
b2.enabled = \cf5 false\cf3 ;\
b3.enabled = \cf5 false\cf3 ;\
w.front;\
\
)\
\
\
\
\cf5 Server\cf3 .new.makeWindow;\
\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/notify"\cf3 , 1);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/start"\cf3 );\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/notify"\cf3 , 0);\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/stop"\cf3 );\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/quit"\cf3 );\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/status"\cf3 );\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/n_run"\cf3 , 2001, 0);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/n_run"\cf3 , 2001, 1);\
\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/d_load"\cf3 , \cf4 "engine/synthdefs/trivial.scsyndef"\cf3 );\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/d_loadDir"\cf3 , \cf4 "engine/synthdefs"\cf3 );\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/d_freeAll"\cf3 );\
\
\
(\
\cf5 var\cf3  w, f, d, values, server, id, isOn = \cf5 false\cf3 ;\
\
values = \cf5 IdentityDictionary\cf3 .new;\
\
f = \{ \cf5 arg\cf3  name, spec = \cf6 \\lin\cf3 , guispec;\
	\cf5 var\cf3  height = 20, v, s, n;\
	guispec = guispec ? spec;\
	spec = spec.asSpec;\
	guispec = guispec.asSpec;\
\
	v = \cf5 SCStaticText\cf3 (w, \cf5 Rect\cf3 (0, 0, 72, height));\
	v.font = \cf5 Font\cf3 (\cf4 "Helvetica"\cf3 , 12);\
	v.stringColor = \cf5 Color\cf3 .black;\
	v.align = \cf6 \\right\cf3 ;\
	\
	s = \cf5 SCSlider\cf3 (w, \cf5 Rect\cf3 (0, 0, 182, height));\
	s.resize = 2;\
	s.action = \{ \
		\cf5 var\cf3  val, guival, step;\
		val = spec.map(s.value);\
		values.put(name, val);\
		if (isOn, \{ server.sendMsg(\cf4 "/n_set"\cf3 , id, name, val); \});\
		guival = guispec.map(s.value);\
		step = pow(10, floor(min(0, guival.abs.log10 - 2)));\
		v.string = guival.round(step).asString ++ guispec.units;\
	\};\
	s.value = spec.unmap(spec.default);\
	s.action.value;\
	\
	n = \cf5 SCStaticText\cf3 (w, \cf5 Rect\cf3 (0, 0, 72, height));	n.string = name;\
	n.stringColor = \cf5 Color\cf3 .black;\
	n.font = \cf5 Font\cf3 (\cf4 "Helvetica"\cf3 , 12);\
	n.resize = 3;\
	\
	w.view.decorator.nextLine;\
\};\
\
\
id = 2001;\
server = \cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110);	\
w = \cf5 SCWindow\cf3 (\cf4 "trem"\cf3 , \cf5 Rect\cf3 (128, 64, 360, 160));\
w.view.decorator = d = \cf5 FlowLayout\cf3 (w.view.bounds);\
\
w.onClose = \{ if (isOn, \{ server.sendMsg(\cf4 "/n_free"\cf3 , 2001) \}) \};\
\
b = \cf5 SCButton\cf3 (w, \cf5 Rect\cf3 (20, 50, 80, 24));\
\
b.states = [[\cf4 "Start Sound"\cf3 , \cf5 Color\cf3 .black, \cf5 Color\cf3 .green],[\cf4 "Stop Sound"\cf3 , \cf5 Color\cf3 .white, \cf5 Color\cf3 .red]];\
d.nextLine;\
b.action = \{ \cf5 arg\cf3  view; \
	\cf5 var\cf3  msg;\
	if (view.value == 1, \{\
		isOn = \cf5 true\cf3 ;\
		msg = [\cf4 "/s_new"\cf3 , \cf4 "trem"\cf3 , 2001, 0];\
		values.keysValuesDo(\{ \cf5 arg\cf3  key, value; msg = msg.addAll([key, value]); \});\
		server.performList(\cf6 \\sendMsg\cf3 , msg); \
	\},\{\
		isOn = \cf5 false\cf3 ;\
		server.sendMsg(\cf4 "/n_free"\cf3 , 2001); \
	\});\
\};\
\
f.value(\cf6 \\freq\cf3 , \cf6 \\freq\cf3 );\
f.value(\cf6 \\rate\cf3 , \cf6 \\lofreq\cf3 );\
f.value(\cf6 \\pan\cf3 , \cf6 \\pan\cf3 );\
f.value(\cf6 \\amp\cf3 , \cf6 \\amp\cf3 , \cf6 \\db\cf3 );\
w.front;\
\
)\
\
\
\
\
\cf2 /////////////////////////////////////////////////////////////////////\
\cf3 \
\
\cf5 SynthDef\cf3 (\cf4 "tish"\cf3 , \{\
	\cf5 var\cf3  x;\
	x = \{\cf5 WhiteNoise\cf3 .ar\}.dup * \cf5 Decay2\cf3 .kr(\cf5 Impulse\cf3 .kr(\cf5 ExpRand\cf3 (0.5,3)), 0.01,0.1,0.1);\
	x = \cf5 CombN\cf3 .ar([0,1], x, 0.08, 2);\
	\cf5 Out\cf3 .ar(0, x.postln);\
\}).writeDefFile;\
\
\
\cf5 SynthDef\cf3 (\cf4 "moto-rev"\cf3 , \{\
	\cf5 var\cf3  x;\
	x = \cf5 RLPF\cf3 .ar(\cf5 LFPulse\cf3 .ar(\cf5 SinOsc\cf3 .kr(0.2, 0, 10, 21), [0,0.1], 0.1), 100, 0.1).clip2(0.4);\
	\cf5 Out\cf3 .ar(0, x);\
\}).writeDefFile;\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/notify"\cf3 , 1);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/start"\cf3 );\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/d_load"\cf3 , \cf4 "engine/synthdefs/tish.scsyndef"\cf3 );\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/s_new"\cf3 , \cf4 "tish"\cf3 , 1001, 0);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/s_new"\cf3 , \cf4 "tish"\cf3 , 1002, 0);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/s_new"\cf3 , \cf4 "tish"\cf3 , 1003, 0);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/s_new"\cf3 , \cf4 "tish"\cf3 , 1004, 0);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/s_new"\cf3 , \cf4 "tish"\cf3 , 1005, 0);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/s_new"\cf3 , \cf4 "tish"\cf3 , 1006, 0);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/s_new"\cf3 , \cf4 "tish"\cf3 , 1007, 0);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/n_free"\cf3 , 1001);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/n_free"\cf3 , 1005);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/b_alloc"\cf3 , 0, 4410, 1);\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/b_alloc"\cf3 , 1, 4410, 1);\
\
\cf5 NetAddr\cf3 (\cf4 "127.0.0.1"\cf3 , 57110).sendMsg(\cf4 "/quit"\cf3 );\
\
\cf5 Server\cf3 .default.sendMsg(\cf4 "/s_new"\cf3 , \cf4 "moto-rev"\cf3 , 1001, 0);\
\cf5 Server\cf3 .default.sendMsg(\cf4 "/n_free"\cf3 , 1001);\
\
(\
	\cf5 var\cf3  w, b1, b2, b3, name, a, s;\
	name = \cf4 "moto-rev"\cf3 ;\
	s = \cf5 Server\cf3 .default;\
	w = \cf5 SCWindow\cf3 (name.asString, \cf5 Rect\cf3 (128, 64, 260, 80));\
	w.view.decorator = \cf5 FlowLayout\cf3 (w.view.bounds);\
	\
	b1 = \cf5 SCButton\cf3 (w, \cf5 Rect\cf3 (0,0, 80, 24));\
	b1.states = [[\cf4 "Load"\cf3 , \cf5 Color\cf3 .black, \cf5 Color\cf3 .green]];\
	b1.action = \{ \cf5 arg\cf3  view; \
		s.sendMsg(\cf4 "/d_load"\cf3 , \cf4 "engine/synthdefs/"\cf3 ++name++\cf4 ".scsyndef"\cf3 );\
	\};\
	b1.enabled = s.serverRunning;\
	\
	b2 = \cf5 SCButton\cf3 (w, \cf5 Rect\cf3 (0,0, 80, 24));\
	b2.states = [\
		[\cf4 "Play"\cf3 , \cf5 Color\cf3 .black, \cf5 Color\cf3 .green],\
		[\cf4 "Stop"\cf3 , \cf5 Color\cf3 .white, \cf5 Color\cf3 .red],\
	];\
	b2.action = \{ \cf5 arg\cf3  view; \
		if (b2.value == 1, \{\
			s.sendMsg(\cf4 "/s_new"\cf3 , name, 1001, 0);\
		\},\{\
			s.sendMsg(\cf4 "/n_free"\cf3 , 1001);\
		\});\
	\};\
	b2.enabled = s.audioRunning;\
\
	a = \cf5 SimpleController\cf3 (s);\
	f = \{ \cf5 arg\cf3  server; \
		b1.enabled = server.serverRunning;\
		b2.enabled = server.serverRunning && server.audioRunning;\
		if (server.audioRunning.not, \{ b2.value = 0 \});\
	\};\
	a.put(\cf6 \\serverRunning\cf3 , f);\
	a.put(\cf6 \\audioRunning\cf3 , f);\
	w.onClose = \{ \
		a.remove;\
	\};\
	w.front;\
\
)\
}
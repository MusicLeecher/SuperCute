<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.41">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #86281f}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #ad140d}
span.s1 {color: #002ca9}
span.s2 {color: #606060}
span.s3 {color: #000000}
span.s4 {color: #4e6a29}
span.s5 {color: #86281f}
span.s6 {color: #001bb9}
span.s7 {color: #2c7014}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>Control</b></p>
<p class="p2"><br></p>
<p class="p3">superclass: MultiOutUGen</p>
<p class="p2"><br></p>
<p class="p3">Used to bring signals and floats into the ugenGraph function of your SynthDef.<span class="Apple-converted-space">  </span>This is the UGen that delivers the args into your function. <span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p3">Generally you do not create Controls yourself. (See Arrays example below)</p>
<p class="p2"><br></p>
<p class="p3">The rate may be either .kr (continous control rate signal) or .ir (a static value, set at the time the synth starts up, and subsequently unchangeable).</p>
<p class="p2"><br></p>
<p class="p3">SynthDef creates these when compiling the ugenGraph function. <span class="Apple-converted-space">  </span>They are created for you, you use them, and you don't really need to worry about them if you don't want to.</p>
<p class="p2"><br></p>
<p class="p4"><span class="s1">SynthDef</span>(<span class="s2">"help-Control"</span>,{ <span class="s1">arg</span> freq=200;</p>
<p class="p5"><br></p>
<p class="p6"><span class="s3"><span class="Apple-tab-span">	</span>freq.inspect; </span>// at the time of compiling the def</p>
<p class="p5"><br></p>
<p class="p4">}).writeDefFile;</p>
<p class="p2"><br></p>
<p class="p3">What is passed into the ugenGraph function is an OutputProxy, and its source is a Control.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">The main explicit use of Control is to allow Arrays to be sent to running Synths:</p>
<p class="p5"><br></p>
<p class="p6">// a synth def that has 4 partials</p>
<p class="p4">(</p>
<p class="p4">s = Server.local;</p>
<p class="p4"><span class="s1">SynthDef</span>(<span class="s2">"help-Control"</span>, { <span class="s1">arg</span> out=0,i_freq;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s1">var</span> klank, harm, amp, ring;</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="s3"><span class="Apple-tab-span">	</span></span>// harmonics</p>
<p class="p4"><span class="Apple-tab-span">	</span>harm = <span class="s1">Control</span>.names([<span class="s4">\harm</span>]).ir(<span class="s1">Array</span>.series(4,1,1).postln);</p>
<p class="p6"><span class="s3"><span class="Apple-tab-span">	</span></span>// amplitudes</p>
<p class="p4"><span class="Apple-tab-span">	</span>amp = <span class="s1">Control</span>.names([<span class="s4">\amp</span>]).ir(<span class="s1">Array</span>.fill(4,0.05));</p>
<p class="p6"><span class="s3"><span class="Apple-tab-span">	</span></span>// ring times</p>
<p class="p4"><span class="Apple-tab-span">	</span>ring = <span class="s1">Control</span>.names([<span class="s4">\ring</span>]).ir(<span class="s1">Array</span>.fill(4,1));</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>klank = <span class="s1">Klank</span>.ar(`[harm,amp,ring], {<span class="s1">ClipNoise</span>.ar(0.003)}.dup, i_freq);</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s1">Out</span>.ar(out, klank);</p>
<p class="p4">}).send(s);</p>
<p class="p4">)</p>
<p class="p5"><br></p>
<p class="p6">// nothing special yet, just using the default set of harmonics.</p>
<p class="p4">a = <span class="s1">Synth</span>(<span class="s2">"help-Control"</span>,[<span class="s4">\i_freq</span>, 300]);</p>
<p class="p4">b = <span class="s1">Synth</span>(<span class="s2">"help-Control"</span>,[<span class="s4">\i_freq</span>, 400]);</p>
<p class="p4">c = <span class="s1">Synth</span>(<span class="s2">"help-Control"</span>,[<span class="s4">\i_freq</span>, 533.33]);</p>
<p class="p4">d = <span class="s1">Synth</span>(<span class="s2">"help-Control"</span>,[<span class="s4">\i_freq</span>, 711.11]);</p>
<p class="p5"><br></p>
<p class="p4">a.free;</p>
<p class="p4">b.free;</p>
<p class="p4">c.free;</p>
<p class="p4">d.free;</p>
<p class="p5"><br></p>
<p class="p6">// in order to set the harmonics amps and ring times at</p>
<p class="p6">// initialization time we need to use an OSC bundle.</p>
<p class="p4">(</p>
<p class="p4">s.sendBundle(<span class="s1">nil</span>,</p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/s_new"</span>, <span class="s2">"help-Control"</span>, 2000, 1, 0, <span class="s4">\i_freq</span>, 500], <span class="s5">// start note</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/n_setn"</span>, 2000, <span class="s2">"harm"</span>, 4, 1, 3, 5, 7] <span class="s5">// set odd harmonics</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>);</p>
<p class="p4">)</p>
<p class="p5"><br></p>
<p class="p4">s.sendMsg(<span class="s2">"/n_free"</span>, 2000);</p>
<p class="p5"><br></p>
<p class="p4">(</p>
<p class="p4">s.sendBundle(<span class="s1">nil</span>,</p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/s_new"</span>, <span class="s2">"help-Control"</span>, 2000, 1, 0, <span class="s4">\i_freq</span>, 500], <span class="s5">// start note</span></p>
<p class="p6"><span class="s3"><span class="Apple-tab-span">	</span></span>// set geometric series harmonics</p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/n_setn"</span>, 2000, <span class="s2">"harm"</span>, 4] ++ <span class="s1">Array</span>.geom(4,1,1.61)</p>
<p class="p4"><span class="Apple-tab-span">	</span>);</p>
<p class="p4">)</p>
<p class="p5"><br></p>
<p class="p4">s.sendMsg(<span class="s2">"/n_free"</span>, 2000);</p>
<p class="p5"><br></p>
<p class="p4">(</p>
<p class="p6">// set harmonics, ring times and amplitudes</p>
<p class="p4">s.sendBundle(<span class="s1">nil</span>,</p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/s_new"</span>, <span class="s2">"help-Control"</span>, 2000, 1, 0, <span class="s4">\i_freq</span>, 500], <span class="s5">// start note</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/n_setn"</span>, 2000, <span class="s2">"harm"</span>, 4, 1, 3, 5, 7], <span class="s5">// set odd harmonics</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/n_setn"</span>, 2000, <span class="s2">"ring"</span>, 4] ++ <span class="s1">Array</span>.fill(4,0.1), <span class="s5">// set shorter ring time</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/n_setn"</span>, 2000, <span class="s2">"amp"</span>, 4] ++ <span class="s1">Array</span>.fill(4,0.2) <span class="s5">// set louder amps</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>);</p>
<p class="p4">)</p>
<p class="p5"><br></p>
<p class="p4">s.sendMsg(<span class="s4">\n_trace</span>, 2000);</p>
<p class="p4">s.sendMsg(<span class="s4">\n_free</span>, 2000);</p>
<p class="p5"><br></p>
<p class="p4">(</p>
<p class="p6">// same effect as above, but packed into one n_setn command</p>
<p class="p4">s.sendBundle(<span class="s1">nil</span>,</p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/s_new"</span>, <span class="s2">"help-Control"</span>, 2000, 1, 0, <span class="s4">\i_freq</span>, 500], <span class="s5">// start note</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s2">"/n_setn"</span>, 2000, <span class="s2">"harm"</span>, 4, 1, 3, 5, 7,</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"ring"</span>, 4] ++ <span class="s1">Array</span>.fill(4,0.1)</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>++ [<span class="s2">"amp"</span>, 4] ++ <span class="s1">Array</span>.fill(4,0.2)</p>
<p class="p4"><span class="Apple-tab-span">	</span>);</p>
<p class="p4">)</p>
<p class="p5"><br></p>
<p class="p4">s.sendMsg(<span class="s4">\n_trace</span>, 2000);</p>
<p class="p4">s.sendMsg(<span class="s4">\n_free</span>, 2000);</p>
<p class="p5"><br></p>
<p class="p3">Similar examples using the Node Object style:</p>
<p class="p2"><br></p>
<p class="p7"><span class="s6">SynthDef</span><span class="s3">(</span>"help-Control-Sines"<span class="s3">, {</span><span class="s6">arg</span><span class="s3"> out=0;</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s6">var</span> sines, control, numsines;</p>
<p class="p4"><span class="Apple-tab-span">	</span>numsines = 20;</p>
<p class="p4"><span class="Apple-tab-span">	</span>control = <span class="s6">Control</span>.names(<span class="s7">\array</span>).kr(<span class="s6">Array</span>.rand(numsines, 400.0, 1000.0));</p>
<p class="p4"><span class="Apple-tab-span">	</span>sines = <span class="s6">Mix</span>(<span class="s6">SinOsc</span>.ar(control, 0, numsines.reciprocal)) ;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s6">Out</span>.ar(out, sines ! 2);</p>
<p class="p4">}).send(s);</p>
<p class="p5"><br></p>
<p class="p7"><span class="s3">b = </span><span class="s6">Synth</span><span class="s3">(</span>"help-Control-Sines"<span class="s3">);</span></p>
<p class="p4">b.setn(<span class="s7">\array</span>, <span class="s6">Array</span>.rand(20, 200, 1600));</p>
<p class="p4">b.setn(<span class="s7">\array</span>, <span class="s6">Array</span>.rand(20, 200, 1600));</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p4">(</p>
<p class="p7"><span class="s6">SynthDef</span><span class="s3">(</span>"help-Control-DynKlank"<span class="s3">, { </span><span class="s6">arg</span><span class="s3"> out=0, freq;</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s6">var</span> klank, harm, amp, ring;</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s3"><span class="Apple-tab-span">	</span></span>// harmonics</p>
<p class="p4"><span class="Apple-tab-span">	</span>harm = <span class="s6">Control</span>.names(<span class="s7">\harm</span>).kr(<span class="s6">Array</span>.series(4,1,1));</p>
<p class="p8"><span class="s3"><span class="Apple-tab-span">	</span></span>// amplitudes</p>
<p class="p4"><span class="Apple-tab-span">	</span>amp = <span class="s6">Control</span>.names(<span class="s7">\amp</span>).kr(<span class="s6">Array</span>.fill(4,0.05));</p>
<p class="p8"><span class="s3"><span class="Apple-tab-span">	</span></span>// ring times</p>
<p class="p4"><span class="Apple-tab-span">	</span>ring = <span class="s6">Control</span>.names(<span class="s7">\ring</span>).kr(<span class="s6">Array</span>.fill(4,1));</p>
<p class="p4"><span class="Apple-tab-span">	</span>klank = <span class="s6">DynKlank</span>.ar(`[harm,amp,ring], {<span class="s6">ClipNoise</span>.ar(0.003)}.dup, freq);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s6">Out</span>.ar(out, klank);</p>
<p class="p4">}).send(s);</p>
<p class="p4">)</p>
<p class="p5"><br></p>
<p class="p7"><span class="s3">a = </span><span class="s6">Synth</span><span class="s3">(</span>"help-Control-DynKlank"<span class="s3">, [</span><span class="s7">\freq</span><span class="s3">, 300]);</span></p>
<p class="p7"><span class="s3">b = </span><span class="s6">Synth</span><span class="s3">(</span>"help-Control-DynKlank"<span class="s3">, [</span><span class="s7">\freq</span><span class="s3">, 400]);</span></p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p4">a.setn(<span class="s7">\harm</span>,  <span class="s6">Array</span>.rand(4, 1.0, 4.7))</p>
<p class="p4">a.setn(<span class="s7">\amp</span>, <span class="s6">Array</span>.rand(4, 0.005, 0.1))</p>
<p class="p4">a.setn(<span class="s7">\ring</span>, <span class="s6">Array</span>.rand(4, 0.005, 1.0))</p>
<p class="p5"><br></p>
<p class="p4">b.setn(<span class="s7">\harm</span>,  <span class="s6">Array</span>.rand(4, 1.0, 4.7))</p>
<p class="p4">b.setn(<span class="s7">\amp</span>, <span class="s6">Array</span>.rand(4, 0.005, 0.1))</p>
<p class="p4">b.setn(<span class="s7">\ring</span>, <span class="s6">Array</span>.rand(4, 0.005, 1.0))</p>
<p class="p5"><br></p>
</body>
</html>

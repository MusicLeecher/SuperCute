<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.42">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica; min-height: 19.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; color: #bf0000}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; min-height: 16.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 4.0px Monaco; min-height: 5.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 3.0px Monaco; min-height: 4.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; color: #606060}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 3.0px Monaco; color: #0000bf; min-height: 4.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; color: #0000bf}
span.s1 {color: #0000bf}
span.s2 {color: #bf0000}
span.s3 {color: #007300}
span.s4 {color: #000000}
span.s5 {font: 12.0px Helvetica}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>SIGNAL PROCESSING in SuperCollider</b></p>
<p class="p2"><b></b><br></p>
<p class="p1"><b>1. A Tour of available Unit Generators.</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>SuperCollider has over 250 unit generators.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span>If you count the unary and binary operators, there are over 300.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span>This tour covers many, but not all of them.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span>categories of unit generators:<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sources: periodic, aperiodic<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>filters</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>distortion<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>panning</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>delays and buffer ugens</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>control: envelopes, triggers, counters, gates, lags, decays</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>spectral<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1"><b>2. Techniques<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></p>
<p class="p1"><span class="Apple-tab-span">	</span>broadening a sound:<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>decorrelation, beat frequencies, delays.</p>
<p class="p1"><span class="Apple-tab-span">	</span>series and parallel structures.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">(</p>
<p class="p3">s = <span class="s1">Server</span>.internal;</p>
<p class="p3"><span class="s1">Server</span>.default = s;</p>
<p class="p3">s.boot;</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p1"><b>Periodic Sources: Oscillators.</b></p>
<p class="p2"><br></p>
<p class="p1"><b>LF - "Low Frequency" Unit Generators.</b></p>
<p class="p2"><br></p>
<p class="p1">LFPar, LFCub, LFTri, Impulse, LFSaw, LFPulse, VarSaw, SyncSaw</p>
<p class="p2"><br></p>
<p class="p1">geometric waveforms, not band limited.</p>
<p class="p1">will cause aliasing at higher frequencies.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">LFPar, LFCub, LFTri, LFSaw, Impulse</p>
<p class="p1">arguments:<span class="Apple-converted-space">  </span>frequency, phase, mul, add</p>
<p class="p2"><br></p>
<p class="p4">// parabolic approximation of sine</p>
<p class="p3">{ <span class="s1">LFPar</span>.ar(<span class="s1">LFPar</span>.kr(<span class="s1">LFPar</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFPar</span>.ar(<span class="s1">LFPar</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFPar</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">// since it is not band limited, there are aliasing artifacts</p>
<p class="p3">{ <span class="s1">LFPar</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p5"><br></p>
<p class="p4">// cubic approximation of sine</p>
<p class="p3">{ <span class="s1">LFCub</span>.ar(<span class="s1">LFCub</span>.kr(<span class="s1">LFCub</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFCub</span>.ar(<span class="s1">LFCub</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFCub</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFCub</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">LFTri</span>.ar(<span class="s1">LFTri</span>.kr(<span class="s1">LFTri</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFTri</span>.ar(<span class="s1">LFTri</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFTri</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFTri</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">LFSaw</span>.ar(<span class="s1">LFSaw</span>.kr(<span class="s1">LFSaw</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFSaw</span>.ar(<span class="s1">LFSaw</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFSaw</span>.ar(100,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFSaw</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Impulse</span>.ar(<span class="s1">LFTri</span>.kr(<span class="s1">LFTri</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">Impulse</span>.ar(<span class="s1">LFTri</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">Impulse</span>.ar(100,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">Impulse</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p6"><br></p>
<p class="p1">LFPulse, VarSaw</p>
<p class="p1">arguments:<span class="Apple-converted-space">  </span>frequency, phase, width, mul, add</p>
<p class="p6"><br></p>
<p class="p3">{ <span class="s1">LFPulse</span>.ar(<span class="s1">LFPulse</span>.kr(<span class="s1">LFPulse</span>.kr(0.2,0,0.5,8,10),0,0.5, 400,800),0,0.5,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFPulse</span>.ar(<span class="s1">LFPulse</span>.kr(3, 0, 0.3, 200, 200), 0, 0.2, 0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFPulse</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0,0.5,0.1) }.scope(1, zoom: 4);</p>
<p class="p5"><br></p>
<p class="p4">// pulse width modulation</p>
<p class="p3">{ <span class="s1">LFPulse</span>.ar(100,0,<span class="s1">MouseY</span>.kr(0,1),0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">LFPulse</span>.ar(100,0,<span class="s1">LFTri</span>.kr(0.2,0,0.5,0.5),0.1) }.scope(1, zoom: 4);</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">VarSaw</span>.ar(<span class="s1">VarSaw</span>.kr(<span class="s1">VarSaw</span>.kr(0.2,0,0.2,8,10),0,0.2, 400,800),0,0.2,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">VarSaw</span>.ar(<span class="s1">VarSaw</span>.kr(0.2, 0, 0.2, 400,800),0,0.2,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">VarSaw</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0,0.2,0.1) }.scope(1, zoom: 4);</p>
<p class="p5"><br></p>
<p class="p4">// pulse width modulation</p>
<p class="p3">{ <span class="s1">VarSaw</span>.ar(100,0,<span class="s1">MouseY</span>.kr(0,1),0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">VarSaw</span>.ar(100,0,<span class="s1">LFTri</span>.kr(0.2,0,0.5,0.5),0.1) }.scope(1, zoom: 4);</p>
<p class="p6"><br></p>
<p class="p1">SyncSaw</p>
<p class="p1">arguments:<span class="Apple-converted-space">  </span>syncFreq, sawFreq, mul, add</p>
<p class="p6"><br></p>
<p class="p3">{ <span class="s1">SyncSaw</span>.ar(100, <span class="s1">MouseX</span>.kr(100, 1000), 0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">SyncSaw</span>.ar(100, <span class="s1">Line</span>.kr(100, 800, 12), 0.1) }.scope(1, zoom: 4);</p>
<p class="p6"><br></p>
<p class="p6"><br></p>
<p class="p1"><b>Band Limited Oscillators</b></p>
<p class="p2"><br></p>
<p class="p1">SinOsc, FSinOsc, Blip, Saw, Pulse</p>
<p class="p1">will not alias.<span class="Apple-converted-space"> </span></p>
<p class="p6"><br></p>
<p class="p1">SinOsc, FSinOsc</p>
<p class="p1">arguments:<span class="Apple-converted-space">  </span>frequency, phase, mul, add</p>
<p class="p6"><br></p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(<span class="s1">SinOsc</span>.kr(<span class="s1">SinOsc</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(<span class="s1">SinOsc</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">FSinOsc</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">// FSinOsc should not be frequency modulated.<span class="Apple-converted-space"> </span></p>
<p class="p4">// Since it is based on a filter at the edge of stability, it will blow up:</p>
<p class="p3">{ <span class="s1">FSinOsc</span>.ar(<span class="s1">FSinOsc</span>.kr(<span class="s1">FSinOsc</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p6"><br></p>
<p class="p1">Blip</p>
<p class="p1">arguments:<span class="Apple-converted-space">  </span>frequency, numHarmonics, mul, add</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">Blip</span>.ar(<span class="s1">XLine</span>.kr(20000,200,6),100,0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">Blip</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),100,0.2) }.scope(1); <span class="s2">// no aliasing</span></p>
<p class="p4">// modulate number of harmonics</p>
<p class="p3">{ <span class="s1">Blip</span>.ar(200,<span class="s1">Line</span>.kr(1,100,20),0.2) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p1">Saw</p>
<p class="p1">arguments:<span class="Apple-converted-space">  </span>frequency, mul, add</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">Saw</span>.ar(<span class="s1">XLine</span>.kr(20000,200,6),0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">Saw</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0.2) }.scope(1); <span class="s2">// no aliasing</span></p>
<p class="p2"><br></p>
<p class="p1">Pulse</p>
<p class="p1">arguments:<span class="Apple-converted-space">  </span>frequency, width, mul, add</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">Pulse</span>.ar(<span class="s1">XLine</span>.kr(20000,200,6),0.3,0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">Pulse</span>.ar(<span class="s1">XLine</span>.kr(100,15000,6),0.3,0.2) }.scope(1); <span class="s2">// no aliasing</span></p>
<p class="p5"><br></p>
<p class="p4">// modulate pulse width</p>
<p class="p3">{ <span class="s1">Pulse</span>.ar(200, <span class="s1">Line</span>.kr(0.01,0.99,8), 0.2) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p4">// two band limited square waves thru a resonant low pass filter</p>
<p class="p3">{ <span class="s1">RLPF</span>.ar(<span class="s1">Pulse</span>.ar([100,250],0.5,0.1), <span class="s1">XLine</span>.kr(8000,400,5), 0.05) }.scope(1);</p>
<p class="p6"><br></p>
<p class="p1">Klang - sine oscillator bank</p>
<p class="p1">arguments:<span class="Apple-converted-space">  </span>`[ frequencies, amplitudes, phases ], mul, add</p>
<p class="p6"><br></p>
<p class="p3">{ <span class="s1">Klang</span>.ar(`[ [800, 1000, 1200],[0.3, 0.3, 0.3],[pi,pi,pi]], 1, 0) * 0.4}.scope(1);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Klang</span>.ar(`[ {exprand(400, 2000)}.dup(16), <span class="s1">nil</span>, <span class="s1">nil</span> ], 1, 0) * 0.04 }.scope(1);</p>
<p class="p6"><br></p>
<p class="p6"><br></p>
<p class="p1"><b>Table Oscillators</b></p>
<p class="p2"><br></p>
<p class="p1">Osc, COsc, VOsc, VOsc3</p>
<p class="p1">Use a buffer allocated on the server.</p>
<p class="p2"><br></p>
<p class="p1">Osc</p>
<p class="p1">arguments: buffer number, frequency, phase, mul, add.</p>
<p class="p2"><br></p>
<p class="p3">(</p>
<p class="p3">b = <span class="s1">Buffer</span>.alloc(s, 2048, 1, bufnum: 80);</p>
<p class="p3">b.sine1(1.0/(1..6), <span class="s1">true</span>, <span class="s1">true</span>, <span class="s1">true</span>);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Osc</span>.ar(80, 100, 0, 0.1) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p3">b.sine1(1.0/(1..12));</p>
<p class="p3">b.sine1(1.0/(1..24));</p>
<p class="p3">b.sine1(1.0/(1..32));</p>
<p class="p3">b.sine1([1.0/(1,3..12), 0].flop.flat.postln);</p>
<p class="p3">b.sine1([1.0/(1,3..32).squared, 0].flop.flat.postln);</p>
<p class="p3">b.sine1((1.dup(4) ++ 0.dup(8)).scramble.postln);</p>
<p class="p3">b.sine1((1.dup(4) ++ 0.dup(8)).scramble.postln);</p>
<p class="p3">b.sine1((1.dup(4) ++ 0.dup(8)).scramble.postln);</p>
<p class="p3">b.sine1((1.dup(4) ++ 0.dup(8)).scramble.postln);</p>
<p class="p3">b.sine1({1.0.rand2.cubed}.dup(8).round(1e-3).postln);</p>
<p class="p3">b.sine1({1.0.rand2.cubed}.dup(12).round(1e-3).postln);</p>
<p class="p3">b.sine1({1.0.rand2.cubed}.dup(16).round(1e-3).postln);</p>
<p class="p3">b.sine1({1.0.rand2.cubed}.dup(24).round(1e-3).postln);</p>
<p class="p6"><br></p>
<p class="p1">COsc - two oscillators, detuned</p>
<p class="p1">arguments: buffer number, frequency, beat frequency, mul, add.</p>
<p class="p6"><br></p>
<p class="p3">b.sine1(1.0/(1..6), <span class="s1">true</span>, <span class="s1">true</span>, <span class="s1">true</span>);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">COsc</span>.ar(80, 100, 1, 0.1) }.scope(1, zoom:4);</p>
<p class="p4">// change buffer as above.</p>
<p class="p6"><br></p>
<p class="p6"><br></p>
<p class="p1">VOsc - multiple wave table crossfade oscillators</p>
<p class="p1">arguments: buffer number, frequency, phase, mul, add.</p>
<p class="p6"><br></p>
<p class="p3">(</p>
<p class="p4">// allocate tables 80 to 87</p>
<p class="p3">8.do {<span class="s1">|i|</span> s.sendMsg(<span class="s3">\b_alloc</span>, 80+i, 1024); };</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// fill tables 80 to 87</p>
<p class="p3">8.do({<span class="s1">|i|</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> n, a;</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// generate array of harmonic amplitudes</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span>n = (i+1)**2; </span>// num harmonics for each table: [1,4,9,16,25,36,49,64]</p>
<p class="p3"><span class="Apple-tab-span">	</span>a = {<span class="s1">|j|</span> ((n-j)/n).squared }.dup(n);</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// fill table</p>
<p class="p3"><span class="Apple-tab-span">	</span>s.listSendMsg([<span class="s3">\b_gen</span>, 80+i, <span class="s3">\sine1</span>, 7] ++ a);</p>
<p class="p3">});</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">VOsc</span>.ar(<span class="s1">MouseX</span>.kr(80,87), 120, 0, 0.3) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// allocate and fill tables 80 to 87</p>
<p class="p3">8.do({<span class="s1">|i|</span></p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// generate array of harmonic amplitudes</p>
<p class="p3"><span class="Apple-tab-span">	</span>a = {1.0.rand2.cubed }.dup((i+1)*4);</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// fill table</p>
<p class="p3"><span class="Apple-tab-span">	</span>s.listSendMsg([<span class="s3">\b_gen</span>, 80+i, <span class="s3">\sine1</span>, 7] ++ a);</p>
<p class="p3">});</p>
<p class="p3">)</p>
<p class="p6"><br></p>
<p class="p1">VOsc3 - three VOscs summed.</p>
<p class="p1">arguments: buffer number, freq1, freq2, freq3, beat frequency, mul, add.</p>
<p class="p6"><br></p>
<p class="p4">// chorusing</p>
<p class="p3">{ <span class="s1">VOsc3</span>.ar(<span class="s1">MouseX</span>.kr(80,87), 120, 121.04, 119.37, 0.2) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p4">// chords</p>
<p class="p3">{ <span class="s1">VOsc3</span>.ar(<span class="s1">MouseX</span>.kr(80,87), 120, 151.13, 179.42, 0.2) }.scope(1, zoom:4);</p>
<p class="p6"><br></p>
<p class="p1"><b>Aperiodic Sources: Noise.</b></p>
<p class="p6"><br></p>
<p class="p6"><br></p>
<p class="p1">LF "Low Frequency" Noise Generators.</p>
<p class="p6"><br></p>
<p class="p1">LFNoise0, LFNoise1, LFNoise2, LFClipNoise</p>
<p class="p1">arguments: frequency, mul, add</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">LFClipNoise</span>.ar(<span class="s1">MouseX</span>.kr(200, 10000, 1), 0.125) }.scope(1);</p>
<p class="p3">{ <span class="s1">LFNoise0</span>.ar(<span class="s1">MouseX</span>.kr(200, 10000, 1), 0.25) }.scope(1);</p>
<p class="p3">{ <span class="s1">LFNoise1</span>.ar(<span class="s1">MouseX</span>.kr(200, 10000, 1), 0.25) }.scope(1);</p>
<p class="p3">{ <span class="s1">LFNoise2</span>.ar(<span class="s1">MouseX</span>.kr(200, 10000, 1), 0.25) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p4">// used as controls</p>
<p class="p3">{ <span class="s1">LFPar</span>.ar(<span class="s1">LFClipNoise</span>.kr(<span class="s1">MouseX</span>.kr(0.5, 64, 1), 200, 400), 0, 0.2) }.scope(1, zoom:8);</p>
<p class="p3">{ <span class="s1">LFPar</span>.ar(<span class="s1">LFNoise0</span>.kr(<span class="s1">MouseX</span>.kr(0.5, 64, 1), 200, 400), 0, 0.2) }.scope(1, zoom:8);</p>
<p class="p3">{ <span class="s1">LFPar</span>.ar(<span class="s1">LFNoise1</span>.kr(<span class="s1">MouseX</span>.kr(0.5, 64, 1), 200, 400), 0, 0.2) }.scope(1, zoom:8);</p>
<p class="p3">{ <span class="s1">LFPar</span>.ar(<span class="s1">LFNoise2</span>.kr(<span class="s1">MouseX</span>.kr(0.5, 64, 1), 200, 400), 0, 0.2) }.scope(1, zoom:8);</p>
<p class="p6"><br></p>
<p class="p6"><br></p>
<p class="p1">Broad Spectrum Noise Generators</p>
<p class="p2"><br></p>
<p class="p1">ClipNoise, WhiteNoise, PinkNoise, BrownNoise, GrayNoise</p>
<p class="p1">arguments: mul, add</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">ClipNoise</span>.ar(0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">WhiteNoise</span>.ar(0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">PinkNoise</span>.ar(0.4) }.scope(1);</p>
<p class="p3">{ <span class="s1">BrownNoise</span>.ar(0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">GrayNoise</span>.ar(0.2) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p1">Impulse Noise Generators</p>
<p class="p2"><br></p>
<p class="p1">Dust, Dust2</p>
<p class="p1">arguments: density, mul, add</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">Dust</span>.ar(<span class="s1">MouseX</span>.kr(1,10000,1), 0.4) }.scope(1, zoom:4);</p>
<p class="p3">{ <span class="s1">Dust2</span>.ar(<span class="s1">MouseX</span>.kr(1,10000,1), 0.4) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1">Chaotic Noise Generators</p>
<p class="p2"><br></p>
<p class="p1">Crackle</p>
<p class="p1">arguments: chaosParam, mul, add</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Crackle</span>.ar(<span class="s1">MouseX</span>.kr(1,2), 0.5) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p1"><b>Filters</b></p>
<p class="p5"><br></p>
<p class="p1">Low Pass, High Pass</p>
<p class="p2"><br></p>
<p class="p1">LPF, HPF - 12 dB / octave</p>
<p class="p1">arguments: in, freq, mul, add</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">LPF</span>.ar(<span class="s1">WhiteNoise</span>.ar, <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">HPF</span>.ar(<span class="s1">WhiteNoise</span>.ar, <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">LPF</span>.ar(<span class="s1">Saw</span>.ar(100), <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">HPF</span>.ar(<span class="s1">Saw</span>.ar(100), <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.2) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p1">Band Pass, Band Cut</p>
<p class="p2"><br></p>
<p class="p1">BPF, BRF - 12 dB / octave</p>
<p class="p1">arguments: in, freq, rq, mul, add</p>
<p class="p1">rq is the reciprocal of the Q of the filter,</p>
<p class="p1">or in other words: the bandwidth in Hertz = rq * freq.</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">BPF</span>.ar(<span class="s1">WhiteNoise</span>.ar, <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.4, 0.4) }.scope(1);</p>
<p class="p3">{ <span class="s1">BRF</span>.ar(<span class="s1">WhiteNoise</span>.ar, <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.4, 0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">BPF</span>.ar(<span class="s1">Saw</span>.ar(100), <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.4, 0.4) }.scope(1);</p>
<p class="p3">{ <span class="s1">BRF</span>.ar(<span class="s1">Saw</span>.ar(100), <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.4, 0.2) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p4">// modulating the bandwidth</p>
<p class="p3">{ <span class="s1">BPF</span>.ar(<span class="s1">WhiteNoise</span>.ar, <span class="s1">3000</span>, MouseX.kr(0.01,0.7,1), 0.4) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p1">Resonant Low Pass, High Pass, Band Pass</p>
<p class="p5"><br></p>
<p class="p1">RLPF, RHPF - 12 dB / octave</p>
<p class="p1">arguments: in, freq, rq, mul, add</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">RLPF</span>.ar(<span class="s1">WhiteNoise</span>.ar, <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.2, 0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">RHPF</span>.ar(<span class="s1">WhiteNoise</span>.ar, <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.2, 0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">RLPF</span>.ar(<span class="s1">Saw</span>.ar(100), <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.2, 0.2) }.scope(1);</p>
<p class="p3">{ <span class="s1">RHPF</span>.ar(<span class="s1">Saw</span>.ar(100), <span class="s1">MouseX</span>.kr(1e2,2e4,1), 0.2, 0.2) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p1">Resonz - resonant band pass filter with uniform amplitude</p>
<p class="p1">arguments: in, freq, rq, mul, add</p>
<p class="p5"><br></p>
<p class="p4">// modulate frequency</p>
<p class="p3">{ <span class="s1">Resonz</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.5), <span class="s1">XLine</span>.kr(1000,8000,10), 0.05) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p4">// modulate bandwidth</p>
<p class="p3">{ <span class="s1">Resonz</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.5), 2000, <span class="s1">XLine</span>.kr(1, 0.001, 8)) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p4">// modulate bandwidth opposite direction</p>
<p class="p3">{ <span class="s1">Resonz</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.5), 2000, <span class="s1">XLine</span>.kr(0.001, 1, 8)) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p1">Ringz - ringing filter.</p>
<p class="p1">Internally it is the same as Resonz but the bandwidth is expressed as a ring time.</p>
<p class="p1">arguments: in, frequency, ring time, mul, add</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Ringz</span>.ar(<span class="s1">Dust</span>.ar(3, 0.3), 2000, 2) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Ringz</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.005), 2000, 0.5) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p4">// modulate frequency</p>
<p class="p3">{ <span class="s1">Ringz</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.005), <span class="s1">XLine</span>.kr(100,3000,10), 0.5) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Ringz</span>.ar(<span class="s1">Impulse</span>.ar(6, 0, 0.3),<span class="Apple-converted-space">  </span><span class="s1">XLine</span>.kr(100,3000,10), 0.5) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p4">// modulate ring time</p>
<p class="p3">{ <span class="s1">Ringz</span>.ar(<span class="s1">Impulse</span>.ar(6, 0, 0.3), 2000, <span class="s1">XLine</span>.kr(0.04, 4, 8)) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1">Simpler Filters</p>
<p class="p1">6 dB / octave</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">OnePole</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.5), <span class="s1">MouseX</span>.kr(-0.99, 0.99)) }.scope(1);</p>
<p class="p3">{ <span class="s1">OneZero</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.5), <span class="s1">MouseX</span>.kr(-0.49, 0.49)) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p1">NonLinear Filters</p>
<p class="p1">Median, Slew</p>
<p class="p2"><br></p>
<p class="p4">// a signal with impulse noise.</p>
<p class="p3">{ <span class="s1">Saw</span>.ar(500, 0.1) + <span class="s1">Dust2</span>.ar(100, 0.9) }.scope(1);</p>
<p class="p4">// after applying median filter</p>
<p class="p3">{ <span class="s1">Median</span>.ar(3, <span class="s1">Saw</span>.ar(500, 0.1) + <span class="s1">Dust2</span>.ar(100, 0.9)) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p4">// a signal with impulse noise.</p>
<p class="p3">{ <span class="s1">Saw</span>.ar(500, 0.1) + <span class="s1">Dust2</span>.ar(100, 0.9) }.scope(1);</p>
<p class="p4">// after applying slew rate limiter</p>
<p class="p3">{ <span class="s1">Slew</span>.ar(<span class="s1">Saw</span>.ar(500, 0.1) + <span class="s1">Dust2</span>.ar(100, 0.9),1000,1000) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p5"><br></p>
<p class="p1">Formant Filter<span class="Apple-converted-space"> </span></p>
<p class="p1">Formlet - A filter whose impulse response is similar to a FOF grain.</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Formlet</span>.ar(<span class="s1">Impulse</span>.ar(<span class="s1">MouseX</span>.kr(2,300,1), 0, 0.4), 800, 0.01, 0.1) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p1">Klank - resonant filter bank</p>
<p class="p1">arguments:<span class="Apple-converted-space">  </span>`[ frequencies, amplitudes, ring times ], mul, add</p>
<p class="p6"><br></p>
<p class="p3">{ <span class="s1">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s1">nil</span>, [1, 1, 1, 1]], <span class="s1">Impulse</span>.ar(2, 0, 0.1)) }.play;</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s1">nil</span>, [1, 1, 1, 1]], <span class="s1">Dust</span>.ar(8, 0.1)) }.play;</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s1">nil</span>, [1, 1, 1, 1]], <span class="s1">PinkNoise</span>.ar(0.007)) }.play;</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Klank</span>.ar(`[ {exprand(200, 4000)}.dup(12), <span class="s1">nil</span>, <span class="s1">nil</span> ], <span class="s1">PinkNoise</span>.ar(0.007)) }.scope(1);</p>
<p class="p6"><br></p>
<p class="p3">{ <span class="s1">Klank</span>.ar(`[ (1..13)*200, <span class="s1">1/</span>(1..13), <span class="s1">nil</span> ], <span class="s1">PinkNoise</span>.ar(0.01)) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Klank</span>.ar(`[ (1,3..13)*200, <span class="s1">1/</span>(1,3..13), <span class="s1">nil</span> ], <span class="s1">PinkNoise</span>.ar(0.01)) }.scope(1);</p>
<p class="p6"><br></p>
<p class="p6"><br></p>
<p class="p1"><b>Distortion</b></p>
<p class="p2"><b></b><br></p>
<p class="p1">abs, max, squared, cubed</p>
<p class="p6"><br></p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">0.2</span>) }.scope(1);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">0.2</span>).abs }.scope(1);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">0.2</span>).max(0) }.scope(1);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0).squared * 0.2 }.scope(1);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0).cubed * 0.2 }.scope(1);</p>
<p class="p5"><br></p>
<p class="p1">distort, softclip, clip2, fold2, wrap2,<span class="Apple-converted-space"> </span></p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">MouseX</span>.kr(0.1,80,1)).distort * 0.2 }.scope(1);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">MouseX</span>.kr(0.1,80,1)).softclip * 0.2 }.scope(1);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">MouseX</span>.kr(0.1,80,1)).clip2(1) * 0.2 }.scope(1);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">MouseX</span>.kr(0.1,80,1)).fold2(1) * 0.2 }.scope(1);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">MouseX</span>.kr(0.1,80,1)).wrap2(1) * 0.2 }.scope(1);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">MouseX</span>.kr(0.1,80,1)).wrap2(1) * 0.2 }.scope(1);</p>
<p class="p6"><br></p>
<p class="p1">scaleneg</p>
<p class="p6"><br></p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(200, 0, <span class="s1">0.2</span>).scaleneg(<span class="s1">MouseX</span>.kr(-1,1)) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p1">waveshaping by phase modulating a 0 Hz sine oscillator</p>
<p class="p1">(currently there is a limit of 8pi)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> in;</p>
<p class="p3"><span class="Apple-tab-span">	</span>in = <span class="s1">SinOsc</span>.ar(300, 0, <span class="s1">MouseX</span>.kr(0.1,8pi,1));</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s1">SinOsc</span><span class="s4">.ar(0, in, 0.2); </span>// 0 Hz sine oscillator</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p1">Shaper<span class="Apple-converted-space"> </span></p>
<p class="p1">input is used to look up a value in a table.</p>
<p class="p1">Chebyshev polynomials are typically used to fill the table.</p>
<p class="p2"><br></p>
<p class="p7"><span class="s5"><img src="attachments/Tour_of_UGens/chebyshevpolynomials.png" alt="attachments/Tour_of_UGens/chebyshevpolynomials.png"></span></p>
<p class="p5"><br></p>
<p class="p3">s.sendMsg(<span class="s3">\b_alloc</span>, 80, 1024); <span class="s2">// allocate table</span></p>
<p class="p4">// fill with chebyshevs</p>
<p class="p3">s.listSendMsg([<span class="s3">\b_gen</span>, 80, <span class="s3">\cheby</span>, 7] ++ {1.0.rand2.squared}.dup(6));</p>
<p class="p8"><br></p>
<p class="p3">{ <span class="s1">Shaper</span>.ar(80, <span class="s1">SinOsc</span>.ar(600, 0, <span class="s1">MouseX</span>.kr(0,1))) * 0.3; }.scope(1);</p>
<p class="p8"><br></p>
<p class="p3">s.listSendMsg([<span class="s3">\b_gen</span>, 80, <span class="s3">\cheby</span>, 7] ++ {1.0.rand2.squared}.dup(6));</p>
<p class="p3">s.listSendMsg([<span class="s3">\b_gen</span>, 80, <span class="s3">\cheby</span>, 7] ++ {1.0.rand2.squared}.dup(6));</p>
<p class="p5"><br></p>
<p class="p1"><b>Panning</b></p>
<p class="p2"><b></b><br></p>
<p class="p3">(</p>
<p class="p3">s = <span class="s1">Server</span>.internal;</p>
<p class="p3"><span class="s1">Server</span>.default = s;</p>
<p class="p3">s.quit;</p>
<p class="p3">s.options.numOutputBusChannels = 8;</p>
<p class="p3">s.options.numInputBusChannels = 8;</p>
<p class="p3">s.boot;</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p1">Pan2 - equal power stereo pan a mono source</p>
<p class="p1">arguments: in, pan position, level</p>
<p class="p1">pan controls typically range from -1 to +1</p>
<p class="p2"><b></b><br></p>
<p class="p3">{ <span class="s1">Pan2</span>.ar(<span class="s1">BrownNoise</span>.ar, <span class="s1">MouseX</span>.kr(-1,1), 0.3) }.scope(2);</p>
<p class="p3">{ <span class="s1">Pan2</span>.ar(<span class="s1">BrownNoise</span>.ar, <span class="s1">SinOsc</span>.kr(0.2), 0.3) }.scope(2);</p>
<p class="p5"><br></p>
<p class="p1">LinPan2 - linear pan a mono source (not equal power)</p>
<p class="p1">arguments: in, pan position, level</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">LinPan2</span>.ar(<span class="s1">BrownNoise</span>.ar, <span class="s1">MouseX</span>.kr(-1,1), 0.3) }.scope(2);</p>
<p class="p3">{ <span class="s1">LinPan2</span>.ar(<span class="s1">BrownNoise</span>.ar, <span class="s1">SinOsc</span>.kr(0.2), 0.3) }.scope(2);</p>
<p class="p5"><br></p>
<p class="p1">Balance2 - balance a stereo source</p>
<p class="p1">arguments: left in, right in, pan position, level</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Balance2</span>.ar(<span class="s1">BrownNoise</span>.ar, <span class="s1">BrownNoise</span>.ar, <span class="s1">MouseX</span>.kr(-1,1), 0.3) }.scope(2);</p>
<p class="p5"><br></p>
<p class="p1">Pan4 - equal power quad panner</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Pan4</span>.ar(<span class="s1">BrownNoise</span>.ar, <span class="s1">MouseX</span>.kr(-1,1), <span class="s1">MouseY</span>.kr(1,-1), 0.3) }.scope(4);</p>
<p class="p5"><br></p>
<p class="p1">PanAz - azimuth panner to any number of channels</p>
<p class="p1">arguments: num channels, in, pan position, level, width</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">PanAz</span>.ar(5, <span class="s1">BrownNoise</span>.ar, <span class="s1">MouseX</span>.kr(-1,1), 0.3, 2) }.scope(5);</p>
<p class="p5"><br></p>
<p class="p4">// change width to 3</p>
<p class="p3">{ <span class="s1">PanAz</span>.ar(5, <span class="s1">BrownNoise</span>.ar, <span class="s1">MouseX</span>.kr(-1,1), 0.3, 3) }.scope(5);</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1">XFade2 - equal power cross fade between two inputs</p>
<p class="p1">arguments: in1, in2, crossfade, level</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">XFade2</span>.ar(<span class="s1">BrownNoise</span>.ar, SinOsc.ar(500), <span class="s1">MouseX</span>.kr(-1,1), 0.3) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p8"><br></p>
<p class="p1">PanB2 and DecodeB2 - 2D ambisonics panner and decoder</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> w, x, y, p, lf, rf, rr, lr;</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>p = <span class="s1">BrownNoise</span>.ar; <span class="s2">// source</span></p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// B-format encode</p>
<p class="p3"><span class="Apple-tab-span">	</span>#w, x, y = <span class="s1">PanB2</span>.ar(p, <span class="s1">MouseX</span>.kr(-1,1), 0.3);<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// B-format decode to quad. outputs in clockwise order</p>
<p class="p3"><span class="Apple-tab-span">	</span>#lf, rf, rr, lr = <span class="s1">DecodeB2</span>.ar(4, w, x, y);</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span>[lf, rf, lr, rr] </span>// reorder to my speaker arrangement: Lf Rf Lr Rr</p>
<p class="p3">}.scope(4);</p>
<p class="p9">)</p>
<p class="p6"><br></p>
<p class="p1">Rotate2 - rotate a sound field of ambisonic or even stereo sound.</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// rotation of stereo sound via mouse<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> x, y;</p>
<p class="p3"><span class="Apple-tab-span">	</span>x = <span class="s1">Mix</span>.fill(4, { <span class="s1">LFSaw</span>.ar(200 + 2.0.rand2, 0, 0.1) }); <span class="s2">// left in</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>y = <span class="s1">WhiteNoise</span>.ar * <span class="s1">LFPulse</span>.kr(3,0,0.7,0.2); <span class="s2">// right in</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>#x, y = <span class="s1">Rotate2</span>.ar(x, y, <span class="s1">MouseX</span>.kr(0,2));</p>
<p class="p3"><span class="Apple-tab-span">	</span>[x,y]</p>
<p class="p3">}.scope(2);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p1"><b>Delays and Buffer UGens</b></p>
<p class="p2"><b></b><br></p>
<p class="p1">DelayN, DelayL, DelayC</p>
<p class="p1">simple delays</p>
<p class="p1">N - no interpolation</p>
<p class="p1">L - linear interpolation</p>
<p class="p1">C - cubic interpolation</p>
<p class="p1">arguments: in, maximum delay time, current delay time, mul, add</p>
<p class="p2"><b></b><br></p>
<p class="p3">(</p>
<p class="p4">// Dust randomly triggers Decay to create an exponential<span class="Apple-converted-space"> </span></p>
<p class="p4">// decay envelope for the WhiteNoise input source</p>
<p class="p3">{</p>
<p class="p3">z = <span class="s1">Decay</span>.ar(<span class="s1">Dust</span>.ar(1,0.5), 0.3, <span class="s1">WhiteNoise</span>.ar);</p>
<p class="p4"><span class="s1">DelayN</span><span class="s4">.ar(z, 0.1, 0.1, 1, z); </span>// input is mixed with delay via the add input</p>
<p class="p3">}.scope(1, zoom: 4)</p>
<p class="p3">)</p>
<p class="p2"><b></b><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3">z = <span class="s1">Decay</span>.ar(<span class="s1">Impulse</span>.ar(2,0,0.4), 0.3, <span class="s1">WhiteNoise</span>.ar);</p>
<p class="p4"><span class="s1">DelayL</span><span class="s4">.ar(z, 0.3, MouseX.kr(0,0.3), 1, z); </span>// input is mixed with delay via the add input</p>
<p class="p3">}.scope(1, zoom: 4)</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p1">CombN, CombL, CombC</p>
<p class="p1">feedback delays</p>
<p class="p1">arguments: in, maximum delay time, current delay time, echo decay time, mul, add</p>
<p class="p2"><br></p>
<p class="p10"><br></p>
<p class="p4">// used as an echo.<span class="Apple-converted-space"> </span></p>
<p class="p3">{ <span class="s1">CombN</span>.ar(<span class="s1">Decay</span>.ar(<span class="s1">Dust</span>.ar(1,0.5), 0.2, <span class="s1">WhiteNoise</span>.ar), 0.2, 0.2, 3) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p4">// Comb used as a resonator. The resonant fundamental is equal to<span class="Apple-converted-space"> </span></p>
<p class="p4">// reciprocal of the delay time.</p>
<p class="p3">{ <span class="s1">CombN</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.02), 0.01, <span class="s1">XLine</span>.kr(0.0001, 0.01, 20), 0.2) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">CombL</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.02), 0.01, <span class="s1">XLine</span>.kr(0.0001, 0.01, 20), 0.2) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">CombC</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.02), 0.01, <span class="s1">XLine</span>.kr(0.0001, 0.01, 20), 0.2) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p4">// with negative feedback:</p>
<p class="p3">{ <span class="s1">CombN</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.02), 0.01, <span class="s1">XLine</span>.kr(0.0001, 0.01, 20), -0.2) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">CombL</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.02), 0.01, <span class="s1">XLine</span>.kr(0.0001, 0.01, 20), -0.2) }.scope(1);</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">CombC</span>.ar(<span class="s1">WhiteNoise</span>.ar(0.02), 0.01, <span class="s1">XLine</span>.kr(0.0001, 0.01, 20), -0.2) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">CombC</span>.ar(<span class="s1">Decay</span>.ar(<span class="s1">Dust</span>.ar(1,0.1), 0.2, <span class="s1">WhiteNoise</span>.ar), 1/100, 1/100, 3) }.play;</p>
<p class="p3">{ <span class="s1">CombC</span>.ar(<span class="s1">Decay</span>.ar(<span class="s1">Dust</span>.ar(1,0.1), 0.2, <span class="s1">WhiteNoise</span>.ar), 1/200, 1/200, 3) }.play;</p>
<p class="p3">{ <span class="s1">CombC</span>.ar(<span class="s1">Decay</span>.ar(<span class="s1">Dust</span>.ar(1,0.1), 0.2, <span class="s1">WhiteNoise</span>.ar), 1/300, 1/300, 3) }.play;</p>
<p class="p3">{ <span class="s1">CombC</span>.ar(<span class="s1">Decay</span>.ar(<span class="s1">Dust</span>.ar(1,0.1), 0.2, <span class="s1">WhiteNoise</span>.ar), 1/400, 1/400, 3) }.scope(1, zoom:4);</p>
<p class="p2"><br></p>
<p class="p5"><br></p>
<p class="p1">AllpassN, AllpassL, AllpassC</p>
<p class="p1">allpass delay</p>
<p class="p1">arguments: in, maximum delay time, current delay time, echo decay time, mul, add</p>
<p class="p2"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> z;</p>
<p class="p3"><span class="Apple-tab-span">	</span>z = <span class="s1">Decay</span>.ar(<span class="s1">Dust</span>.ar(1,0.5), 0.1, <span class="s1">WhiteNoise</span>.ar);</p>
<p class="p3"><span class="Apple-tab-span">	</span>8.do { z = <span class="s1">AllpassL</span>.ar(z, 0.04, 0.04.rand, 2) };</p>
<p class="p3"><span class="Apple-tab-span">	</span>z</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>PlayBuf</b></p>
<p class="p1">buffer playback</p>
<p class="p1">arguments: numChannels, buffer number, rate, trigger, start pos, loop</p>
<p class="p2"><br></p>
<p class="p4">// read sound</p>
<p class="p11"><span class="s4">b = </span><span class="s1">Buffer</span><span class="s4">.read(s, </span>"sounds/a11wlk01.wav"<span class="s4">);</span></p>
<p class="p2"><br></p>
<p class="p3">{ SinOsc.ar(800 + (700 * <span class="s1">PlayBuf</span>.ar(1,b.bufnum, <span class="s1">BufRateScale</span>.kr(b.bufnum),<span class="Apple-converted-space">  </span>loop:1)),0,0.3) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p4">// loop is true</p>
<p class="p3">{ <span class="s1">PlayBuf</span>.ar(1,b.bufnum, <span class="s1">BufRateScale</span>.kr(b.bufnum), loop:1) }.scope(1);</p>
<p class="p12"><br></p>
<p class="p5"><br></p>
<p class="p4">// trigger one shot on each pulse</p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trig;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trig = <span class="s1">Impulse</span>.kr(2.0);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">PlayBuf</span>.ar(1,b.bufnum,<span class="s1">BufRateScale</span>.kr(b.bufnum),trig,0,0);</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p4">// trigger one shot on each pulse</p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trig;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trig = <span class="s1">Impulse</span>.kr(<span class="s1">XLine</span>.kr(0.1,100,30));</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">PlayBuf</span>.ar(1,b.bufnum,<span class="s1">BufRateScale</span>.kr(b.bufnum),trig,5000,0);</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p4">// mouse control of trigger rate and startpos</p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trig;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trig = <span class="s1">Impulse</span>.kr(<span class="s1">MouseY</span>.kr(0.5,200,1));</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">PlayBuf</span>.ar(1,b.bufnum,<span class="s1">BufRateScale</span>.kr(b.bufnum),trig,<span class="s1">MouseX</span>.kr(0,<span class="s1">BufFrames</span>.kr(b.bufnum)),1)</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p4">// accelerating pitch</p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> rate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>rate = <span class="s1">XLine</span>.kr(0.1,100,60);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">PlayBuf</span>.ar(1, b.bufnum, rate, 1.0,0.0, 1.0)</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p4">// sine wave control of playback rate. negative rate plays backwards</p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> rate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>rate = <span class="s1">FSinOsc</span>.kr(<span class="s1">XLine</span>.kr(0.2,8,30), 0, 3, 0.6);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">PlayBuf</span>.ar(1,b.bufnum,<span class="s1">BufRateScale</span>.kr(b.bufnum)*rate,1,0,1)</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p4">// zig zag around sound<span class="Apple-converted-space"> </span></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> rate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>rate = <span class="s1">LFNoise2</span>.kr(<span class="s1">XLine</span>.kr(1,20,60), 2);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">PlayBuf</span>.ar(1,b.bufnum,<span class="s1">BufRateScale</span>.kr(b.bufnum) * rate,1,0,1)</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p10"><br></p>
<p class="p2"><br></p>
<p class="p4">// free sound</p>
<p class="p3">b.free;</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1"><b>TGrains</b></p>
<p class="p1">granulation of a buffer</p>
<p class="p1">arguments: numChannels, trigger, buffer number, rate, center pos, dur, pan, amp, interpolation</p>
<p class="p2"><br></p>
<p class="p4">// read sound</p>
<p class="p11"><span class="s4">b = </span><span class="s1">Buffer</span><span class="s4">.read(s, </span>"sounds/a11wlk01.wav"<span class="s4">);</span></p>
<p class="p2"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trate, dur;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trate = <span class="s1">MouseY</span>.kr(2,200,1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>dur = 4 / trate;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">TGrains</span>.ar(2, <span class="s1">Impulse</span>.ar(trate), b.bufnum, 1, <span class="s1">MouseX</span>.kr(0,<span class="s1">BufDur</span>.kr(b.bufnum)), dur, 0, 0.1, 2);</p>
<p class="p3">}.scope(2, zoom: 4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trate, dur, clk, pos, pan;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trate = <span class="s1">MouseY</span>.kr(8,120,1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>dur = 12 / trate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>clk = <span class="s1">Impulse</span>.kr(trate);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pos = <span class="s1">MouseX</span>.kr(0,<span class="s1">BufDur</span>.kr(b.bufnum)) + <span class="s1">TRand</span>.kr(0, 0.01, clk);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pan = <span class="s1">WhiteNoise</span>.kr(0.6);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">TGrains</span>.ar(2, clk, b.bufnum, 1, pos, dur, pan, 0.1);</p>
<p class="p3">}.scope(2, zoom: 4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p4">// 4 channels</p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trate, dur, clk, pos, pan;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trate = <span class="s1">MouseY</span>.kr(8,120,1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>dur = 12 / trate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>clk = <span class="s1">Impulse</span>.kr(trate);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pos = <span class="s1">MouseX</span>.kr(0,<span class="s1">BufDur</span>.kr(b.bufnum)) + <span class="s1">TRand</span>.kr(0, 0.01, clk);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pan = <span class="s1">WhiteNoise</span>.kr(0.6);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">TGrains</span>.ar(4, clk, b.bufnum, 1, pos, dur, pan, 0.1);</p>
<p class="p3">}.scope(4, zoom: 4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trate, dur, clk, pos, pan;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trate = <span class="s1">MouseY</span>.kr(8,120,1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>dur = 4 / trate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>clk = <span class="s1">Dust</span>.kr(trate);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pos = <span class="s1">MouseX</span>.kr(0,<span class="s1">BufDur</span>.kr(b.bufnum)) + <span class="s1">TRand</span>.kr(0, 0.01, clk);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pan = <span class="s1">WhiteNoise</span>.kr(0.6);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">TGrains</span>.ar(2, clk, b.bufnum, 1, pos, dur, pan, 0.1);</p>
<p class="p3">}.scope(2, zoom: 4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trate, dur, clk, pos, pan;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trate = <span class="s1">LinExp</span>.kr(<span class="s1">LFTri</span>.kr(<span class="s1">MouseY</span>.kr(0.1,2,1)),-1,1,8,120);</p>
<p class="p3"><span class="Apple-tab-span">	</span>dur = 12 / trate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>clk = <span class="s1">Impulse</span>.ar(trate);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pos = <span class="s1">MouseX</span>.kr(0,<span class="s1">BufDur</span>.kr(b.bufnum));</p>
<p class="p3"><span class="Apple-tab-span">	</span>pan = <span class="s1">WhiteNoise</span>.kr(0.6);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">TGrains</span>.ar(2, clk, b.bufnum, 1, pos, dur, pan, 0.1);</p>
<p class="p3">}.scope(2, zoom: 4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trate, dur, clk, pos, pan;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trate = 12;</p>
<p class="p3"><span class="Apple-tab-span">	</span>dur = <span class="s1">MouseY</span>.kr(0.2,24,1) / trate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>clk = <span class="s1">Impulse</span>.kr(trate);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pos = <span class="s1">MouseX</span>.kr(0,<span class="s1">BufDur</span>.kr(b.bufnum)) + <span class="s1">TRand</span>.kr(0, 0.01, clk);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pan = <span class="s1">WhiteNoise</span>.kr(0.6);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">TGrains</span>.ar(2, clk, b.bufnum, 1, pos, dur, pan, 0.1);</p>
<p class="p3">}.scope(2, zoom: 4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trate, dur, clk, pos, pan;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trate = 100;</p>
<p class="p3"><span class="Apple-tab-span">	</span>dur = 8 / trate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>clk = <span class="s1">Impulse</span>.kr(trate);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pos = <span class="s1">Integrator</span>.kr(<span class="s1">BrownNoise</span>.kr(0.001));</p>
<p class="p3"><span class="Apple-tab-span">	</span>pan = <span class="s1">WhiteNoise</span>.kr(0.6);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">TGrains</span>.ar(2, clk, b.bufnum, 1, pos, dur, pan, 0.1);</p>
<p class="p3">}.scope(2, zoom: 4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trate, dur, clk, pos, pan;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trate = <span class="s1">MouseY</span>.kr(1,400,1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>dur = 8 / trate;</p>
<p class="p3"><span class="Apple-tab-span">	</span>clk = <span class="s1">Impulse</span>.kr(trate);</p>
<p class="p3"><span class="Apple-tab-span">	</span>pos = <span class="s1">MouseX</span>.kr(0,<span class="s1">BufDur</span>.kr(b.bufnum));</p>
<p class="p3"><span class="Apple-tab-span">	</span>pan = <span class="s1">WhiteNoise</span>.kr(0.8);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">TGrains</span>.ar(2, clk, b.bufnum, 2 ** <span class="s1">WhiteNoise</span>.kr(2), pos, dur, pan, 0.1);</p>
<p class="p3">}.scope(2, zoom: 4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trate, dur;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trate = <span class="s1">MouseY</span>.kr(2,120,1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>dur = 1.2 / trate;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">TGrains</span>.ar(2, <span class="s1">Impulse</span>.ar(trate), b.bufnum, (1.2 ** <span class="s1">WhiteNoise</span>.kr(3).round(1)), <span class="s1">MouseX</span>.kr(0,<span class="s1">BufDur</span>.kr(b.bufnum)), dur, <span class="s1">WhiteNoise</span>.kr(0.6), 0.1);</p>
<p class="p3">}.scope(2, zoom: 4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p4">// free sound</p>
<p class="p3">b.free;</p>
<p class="p2"><br></p>
<p class="p5"><br></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>Control</b></p>
<p class="p2"><b></b><br></p>
<p class="p1">Filters for Controls</p>
<p class="p2"><b></b><br></p>
<p class="p1">Decay</p>
<p class="p1">triggered exponential decay</p>
<p class="p1">arguments: in, decay time, mul, add</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">WhiteNoise</span>.ar * <span class="s1">Decay</span>.ar(<span class="s1">Impulse</span>.ar(1), 0.9, 0.2) }.scope(1, zoom:4);</p>
<p class="p3">{ <span class="s1">WhiteNoise</span>.ar * <span class="s1">Decay</span>.ar(<span class="s1">Dust</span>.ar(3), 0.9, 0.2) }.scope(1, zoom:4);</p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(<span class="s1">Decay</span>.ar(<span class="s1">Dust</span>.ar(4), 0.5, 1000, 400), 0, 0.2) }.scope(1, zoom:4);</p>
<p class="p2"><br></p>
<p class="p1">Decay2</p>
<p class="p1">triggered exponential attack and exponential decay<span class="Apple-converted-space"> </span></p>
<p class="p1">arguments: trigger, attack time, decay time, mul, add</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">WhiteNoise</span>.ar * <span class="s1">Decay2</span>.ar(<span class="s1">Impulse</span>.ar(1), 0.2, 0.9, 0.2) }.scope(1, zoom:4);</p>
<p class="p3">{ <span class="s1">WhiteNoise</span>.ar * <span class="s1">Decay2</span>.ar(<span class="s1">Dust</span>.ar(3), 0.2, 0.9, 0.2) }.scope(1, zoom:4);</p>
<p class="p2"><br></p>
<p class="p1">Lag</p>
<p class="p1">arguments: trigger, duration</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(<span class="s1">Lag</span>.ar(<span class="s1">LFPulse</span>.ar(2,0,0.5,800,400), <span class="s1">MouseX</span>.kr(0,0.5)), 0, 0.2) }.scope(1, zoom:4);</p>
<p class="p2"><br></p>
<p class="p1">Integrator</p>
<p class="p1">leaky integrator</p>
<p class="p2"><br></p>
<p class="p3">{ <span class="s1">SinOsc</span>.ar(<span class="s1">Integrator</span>.ar(<span class="s1">Dust2</span>.ar(8), 0.99999, 200, 800), 0, 0.2) }.scope(1)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">Triggers</p>
<p class="p2"><b></b><br></p>
<p class="p1">Trig, Trig1</p>
<p class="p1">timed duration gate</p>
<p class="p1">arguments: trigger, duration</p>
<p class="p2"><b></b><br></p>
<p class="p4">// amplitude determined by amplitude of trigger</p>
<p class="p3">{ <span class="s1">Trig</span>.ar(<span class="s1">Dust</span>.ar(2), 0.2) * <span class="s1">FSinOsc</span>.ar(800, 0, 0.4) }.scope(1, zoom:4);</p>
<p class="p4">// amplitude always the same.</p>
<p class="p3">{ <span class="s1">Trig1</span>.ar(<span class="s1">Dust</span>.ar(2), 0.2) * <span class="s1">FSinOsc</span>.ar(800, 0, 0.4) }.scope(1, zoom:4)</p>
<p class="p2"><b></b><br></p>
<p class="p1">TDelay</p>
<p class="p1">delays a trigger. only delays one pending trigger at a time.</p>
<p class="p1">arguments: trigger, delay time</p>
<p class="p2"><br></p>
<p class="p3">(</p>
<p class="p3">{<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> trig;</p>
<p class="p3"><span class="Apple-tab-span">	</span>trig = <span class="s1">Dust</span>.ar(2);</p>
<p class="p3"><span class="Apple-tab-span">	</span>[(<span class="s1">Trig1</span>.ar(trig, 0.05) * <span class="s1">FSinOsc</span>.ar(600, 0, 0.2)),</p>
<p class="p3"><span class="Apple-tab-span">	</span>(<span class="s1">Trig1</span>.ar(<span class="s1">TDelay</span>.ar(trig, 0.1), 0.05) * <span class="s1">FSinOsc</span>.ar(800, 0, 0.2))]</p>
<p class="p3">}.scope(2, zoom:4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p1">Latch</p>
<p class="p1">sample and hold</p>
<p class="p1">arguments: in, trigger</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Blip</span>.ar(<span class="s1">Latch</span>.ar(<span class="s1">WhiteNoise</span>.ar, <span class="s1">Impulse</span>.ar(9)) * 400 + 500, 4, 0.2) }.play;</p>
<p class="p3">{ <span class="s1">Blip</span>.ar(<span class="s1">Latch</span>.ar(<span class="s1">SinOsc</span>.ar(0.3), <span class="s1">Impulse</span>.ar(9)) * 400 + 500, 4, 0.2) }.play;</p>
<p class="p5"><br></p>
<p class="p1">Gate</p>
<p class="p1">pass or hold</p>
<p class="p1">arguments: in, trigger</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">Blip</span>.ar(<span class="s1">Gate</span>.ar(<span class="s1">LFNoise2</span>.ar(40), <span class="s1">LFPulse</span>.ar(1)) * 400 + 500, 4, 0.2) }.scope(1, zoom:4);</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1">PulseCount</p>
<p class="p1">count triggers</p>
<p class="p1">arguments: trigger, reset</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p13">SinOsc<span class="s4">.ar(</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">PulseCount</span>.ar(<span class="s1">Impulse</span>.ar(10), <span class="s1">Impulse</span>.ar(0.4)) * 200,<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0, 0.05</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p3">}.scope(2, zoom:4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p1">PulseDivider</p>
<p class="p1">arguments: trigger, div, start</p>
<p class="p5"><br></p>
<p class="p13">(</p>
<p class="p3">{<span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> p, a, b;</p>
<p class="p3"><span class="Apple-tab-span">	</span>p = <span class="s1">Impulse</span>.ar(8);</p>
<p class="p3"><span class="Apple-tab-span">	</span>a = <span class="s1">SinOsc</span>.ar(1200, 0, <span class="s1">Decay2</span>.ar(p, 0.005, 0.1));</p>
<p class="p3"><span class="Apple-tab-span">	</span>b = <span class="s1">SinOsc</span>.ar(600,<span class="Apple-converted-space">  </span>0, <span class="s1">Decay2</span>.ar(<span class="s1">PulseDivider</span>.ar(p, <span class="s1">MouseX</span>.kr(1,8).round(1)), 0.005, 0.5));</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>[a, b] * 0.4</p>
<p class="p3">}.scope(2, zoom:4);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1">EnvGen</p>
<p class="p1">envelope generator</p>
<p class="p1">envelope is specified using an instance of the Env class.</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">EnvGen</span>.kr(<span class="s1">Env</span>.perc, doneAction:2) * <span class="s1">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p3">{ <span class="s1">EnvGen</span>.kr(<span class="s1">Env</span>.perc(1,0.005,1,4), doneAction:2) * <span class="s1">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">EnvGen</span>.kr(<span class="s1">Env</span>.perc, Impulse.kr(2)) * <span class="s1">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p3">{ <span class="s1">EnvGen</span>.kr(<span class="s1">Env</span>.perc, Dust.kr(3)) * <span class="s1">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p5"><br></p>
<p class="p4">// for sustain envelopes a gate is required</p>
<p class="p3">z = { <span class="s1">arg</span> gate=1; <span class="s1">EnvGen</span>.kr(<span class="s1">Env</span>.adsr, gate, doneAction:2) * <span class="s1">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p3">z.release;</p>
<p class="p2"><b></b><br></p>
<p class="p3">(</p>
<p class="p4">// randomly generated envelope</p>
<p class="p3">z = { <span class="s1">arg</span> gate=1;<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> env, n=32;</p>
<p class="p3"><span class="Apple-tab-span">	</span>env = <span class="s1">Env</span>(</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[0]++{1.0.rand.squared}.dup(n-1) ++ [0],<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{rrand(0.005,0.2)}.dup(n),</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">\lin</span>, n-8, 8 );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">EnvGen</span>.kr(env, gate, doneAction: 2) * <span class="s1">LFTri</span>.ar(220,0,0.4)<span class="Apple-converted-space"> </span></p>
<p class="p3">}.scope(1, zoom:4);</p>
<p class="p3">)</p>
<p class="p3">z.release;</p>
<p class="p2"><b></b><br></p>
<p class="p1"><b>Spectral</b></p>
<p class="p2"><b></b><br></p>
<p class="p1">FFT, IFFT and the phase vocoder ugens.</p>
<p class="p2"><br></p>
<p class="p1">FFT calculates the spectrum of a sound, puts it into a buffer, and outputs a trigger each time the</p>
<p class="p1">buffer is ready to process. The PV UGens process the spectrum when they receive the trigger.</p>
<p class="p1">IFFT converts the spectrum back into sound.</p>
<p class="p2"><br></p>
<p class="p5"><br></p>
<p class="p4">// alloc a buffer for the FFT</p>
<p class="p3">b = <span class="s1">Buffer</span>.alloc(s,2048,1);</p>
<p class="p4">// read a sound</p>
<p class="p11"><span class="s4">c = </span><span class="s1">Buffer</span><span class="s4">.read(s, </span>"sounds/a11wlk01.wav"<span class="s4">);</span></p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// do nothing</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> in, chain;</p>
<p class="p3"><span class="Apple-tab-span">	</span>in = <span class="s1">PlayBuf</span>.ar(1,c.bufnum, <span class="s1">BufRateScale</span>.kr(c.bufnum), loop:1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">FFT</span>(b.bufnum, in);</p>
<p class="p3"><span class="Apple-tab-span">	</span>0.5 * <span class="s1">IFFT</span>(chain);</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// pass only magnitudes above a threshold</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> in, chain;</p>
<p class="p3"><span class="Apple-tab-span">	</span>in = <span class="s1">PlayBuf</span>.ar(1,c.bufnum, <span class="s1">BufRateScale</span>.kr(c.bufnum), loop:1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">FFT</span>(b.bufnum, in);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">PV_MagAbove</span>(chain, <span class="s1">MouseX</span>.kr(0.1,512,1));<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>0.5 * <span class="s1">IFFT</span>(chain);</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// pass only magnitudes below a threshold</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> in, chain;</p>
<p class="p3"><span class="Apple-tab-span">	</span>in = <span class="s1">PlayBuf</span>.ar(1,c.bufnum, <span class="s1">BufRateScale</span>.kr(c.bufnum), loop:1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">FFT</span>(b.bufnum, in);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">PV_MagBelow</span>(chain, <span class="s1">MouseX</span>.kr(0.1,512,1));<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>0.5 * <span class="s1">IFFT</span>(chain);</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// brick wall filter.</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> in, chain;</p>
<p class="p3"><span class="Apple-tab-span">	</span>in = <span class="s1">PlayBuf</span>.ar(1,c.bufnum, <span class="s1">BufRateScale</span>.kr(c.bufnum), loop:1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">FFT</span>(b.bufnum, in);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">PV_BrickWall</span>(chain, <span class="s1">MouseX</span>.kr(-1,1));<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>0.5 * <span class="s1">IFFT</span>(chain);</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// pass random frequencies. Mouse controls how many to pass.</p>
<p class="p4">// trigger changes the frequencies periodically</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> in, chain;</p>
<p class="p3"><span class="Apple-tab-span">	</span>in = <span class="s1">PlayBuf</span>.ar(1,c.bufnum, <span class="s1">BufRateScale</span>.kr(c.bufnum), loop:1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">FFT</span>(b.bufnum, in);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">PV_RandComb</span>(chain, <span class="s1">MouseX</span>.kr(0,1), <span class="s1">Impulse</span>.kr(0.4));</p>
<p class="p3"><span class="Apple-tab-span">	</span>0.5 * <span class="s1">IFFT</span>(chain);</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// rectangular comb filter</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> in, chain;</p>
<p class="p3"><span class="Apple-tab-span">	</span>in = <span class="s1">PlayBuf</span>.ar(1,c.bufnum, <span class="s1">BufRateScale</span>.kr(c.bufnum), loop:1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">FFT</span>(b.bufnum, in);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">PV_RectComb</span>(chain, 8, <span class="s1">MouseY</span>.kr(0,1), <span class="s1">MouseX</span>.kr(0,1));</p>
<p class="p3"><span class="Apple-tab-span">	</span>0.5 * <span class="s1">IFFT</span>(chain);</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// freeze magnitudes</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> in, chain;</p>
<p class="p3"><span class="Apple-tab-span">	</span>in = <span class="s1">PlayBuf</span>.ar(1,c.bufnum, <span class="s1">BufRateScale</span>.kr(c.bufnum), loop:1);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">FFT</span>(b.bufnum, in);</p>
<p class="p3"><span class="Apple-tab-span">	</span>chain = <span class="s1">PV_MagFreeze</span>(chain, <span class="s1">LFPulse</span>.kr(1, 0.75));</p>
<p class="p3"><span class="Apple-tab-span">	</span>0.5 * <span class="s1">IFFT</span>(chain);</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p6"><br></p>
<p class="p1"><b>2. Techniques</b></p>
<p class="p2"><br></p>
<p class="p1"><b>Artificial Space</b></p>
<p class="p1">Building a sense of space into a sound by setting up phase differences between the speakers.</p>
<p class="p6"><br></p>
<p class="p5"><br></p>
<p class="p3">{ <span class="s1">var</span> x; x = <span class="s1">BrownNoise</span>.ar(0.2); [x,x] }.scope(2); <span class="s2">// correlated</span></p>
<p class="p3">{ {<span class="s1">BrownNoise</span>.ar(0.2)}.dup }.scope(2); <span class="s2">// not correlated</span></p>
<p class="p5"><br></p>
<p class="p4">// correlated</p>
<p class="p3">{ <span class="s1">var</span> x; x = <span class="s1">LPF</span>.ar(<span class="s1">BrownNoise</span>.ar(0.2), <span class="s1">MouseX</span>.kr(100,10000)); [x,x] }.scope(2);</p>
<p class="p4">// not correlated</p>
<p class="p3">{ <span class="s1">LPF</span>.ar({<span class="s1">BrownNoise</span>.ar(0.2)}.dup, <span class="s1">MouseX</span>.kr(100,10000)) }.scope(2);</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p4">// correlated</p>
<p class="p3">(</p>
<p class="p3">{ <span class="s1">var</span> x;<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>x = <span class="s1">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s1">nil</span>, [1, 1, 1, 1]], <span class="s1">PinkNoise</span>.ar(7e-3));<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>[x,x]<span class="Apple-converted-space"> </span></p>
<p class="p3">}.scope(2))</p>
<p class="p4">// not correlated</p>
<p class="p3">{ <span class="s1">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s1">nil</span>, [1, 1, 1, 1]], <span class="s1">PinkNoise</span>.ar([7e-3,7e-3])) }.scope(2);</p>
<p class="p5"><br></p>
<p class="p4">// two waves mixed together coming out both speakers</p>
<p class="p3">{ <span class="s1">var</span> x; x = <span class="s1">Mix</span>.ar(<span class="s1">VarSaw</span>.ar([100,101], 0, 0.1, 0.2)); [x,x] }.scope(2);</p>
<p class="p4">// two waves coming out each speaker independantly</p>
<p class="p3">{ <span class="s1">VarSaw</span>.ar([100,101], 0, 0.1, 0.2 * 1.414) }.scope(2); <span class="s2">// * 1.414 to compensate for power</span></p>
<p class="p5"><br></p>
<p class="p4">// delays as cues to direction</p>
<p class="p4">// mono</p>
<p class="p3">{ <span class="s1">var</span> x; x = <span class="s1">LFTri</span>.ar(1000,0,<span class="s1">Decay2</span>.ar(<span class="s1">Impulse</span>.ar(4,0,0.2),0.004,0.2)); [x,x]}.scope(2);</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// inter-speaker delays</p>
<p class="p3">{ <span class="s1">var</span> x; x = <span class="s1">LFTri</span>.ar(1000,0,<span class="s1">Decay2</span>.ar(<span class="s1">Impulse</span>.ar(4,0,0.2),0.004,0.2));<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>[<span class="s1">DelayC</span>.ar(x,0.01,0.01),<span class="s1">DelayC</span>.ar(x,0.02,<span class="s1">MouseX</span>.kr(0.02, 0))]</p>
<p class="p3">}.scope(2);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// mixing two delays together</p>
<p class="p4">// you hear a phasing sound but the sound is still flat.</p>
<p class="p3">{ <span class="s1">var</span> x; x = <span class="s1">BrownNoise</span>.ar(0.2);<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>x = <span class="s1">Mix</span>.ar([<span class="s1">DelayC</span>.ar(x,0.01,0.01),<span class="s1">DelayC</span>.ar(x,0.02,<span class="s1">MouseX</span>.kr(0,0.02))]);</p>
<p class="p3"><span class="Apple-tab-span">	</span>[x,x]</p>
<p class="p3">}.scope(2);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p4">// more spatial sounding. phasing causes you to perceive directionality</p>
<p class="p3">{ <span class="s1">var</span> x; x = <span class="s1">BrownNoise</span>.ar(0.2);<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>[<span class="s1">DelayC</span>.ar(x,0.01,0.01),<span class="s1">DelayC</span>.ar(x,0.02,<span class="s1">MouseX</span>.kr(0.02, 0))]</p>
<p class="p3">}.scope(2);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1"><b>Parallel Structures</b></p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// mixing sine oscillators in parallel</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s1">var</span><span class="s4"> n = 16; </span>// number of structures to make</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// mix together<span class="Apple-converted-space">  </span>parallel structures</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">Mix</span>.fill(n,<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// this function creates an oscillator at a random frequency</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{ <span class="s1">FSinOsc</span>.ar(200 + 1000.0.rand) }</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span>) / (2*n)<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// scale amplitude</p>
<p class="p3">}.scope(1);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// mixing sine oscillators in parallel</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s1">var</span><span class="s4"> n = 16; </span>// number of structures to make</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// mix together<span class="Apple-converted-space">  </span>parallel structures</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">Mix</span>.fill(n,<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// this function creates an oscillator at a random frequency</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{ <span class="s1">FSinOsc</span>.ar(200 + 1000.0.rand + [0, 0.5]) }</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span>) / (2*n)<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// scale amplitude</p>
<p class="p3">}.scope(2);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// mixing sine oscillators in parallel</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s1">var</span><span class="s4"> n = 16; </span>// number of structures to make</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span>// mix together<span class="Apple-converted-space">  </span>parallel structures</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">Mix</span>.fill(n,<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>var amp;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>amp = <span class="s1">FSinOsc</span>.kr(exprand(0.1,1),2pi.rand).max(0);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">Pan2</span>.ar(</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">FSinOsc</span>.ar(exprand(100,1000.0), 0, amp),</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1.0.rand2)</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span>) / (2*n)<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// scale amplitude</p>
<p class="p3">}.scope(2);</p>
<p class="p3">)</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p3">(</p>
<p class="p3">{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> n;</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span>n = 8; </span>// number of 'voices'</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s1">Mix</span><span class="s4">.ar( </span>// mix all stereo pairs down.</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s1">Pan2</span><span class="s4">.ar( </span>// pan the voice to a stereo position</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s1">CombL</span><span class="s4">.ar( </span>// a comb filter used as a string resonator</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s1">Dust</span><span class="s4">.ar( </span>// random impulses as an excitation function</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// an array to cause expansion of Dust to n channels</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// 1 means one impulse per second on average</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1.dup(n),<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.3 </span>// amplitude</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>),<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.01, </span>// max delay time in seconds</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// array of different random lengths for each 'string'</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{0.004.rand+0.0003}.dup(n),<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>4 </span>// decay time in seconds</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>),</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{1.0.rand2}.dup(n) </span>// give each voice a different pan position</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><span class="Apple-tab-span">	</span>)</p>
<p class="p3">}.scope(2, zoom:4);</p>
<p class="p3">)</p>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.42">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 56.0px; text-indent: -56.0px; font: 12.0px Helvetica}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; min-height: 16.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #a71e12}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 28.0px; text-indent: -28.0px; font: 12.0px Helvetica}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060; min-height: 12.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p13 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p14 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco}
p.p15 {margin: 0.0px 0.0px 0.0px 28.0px; text-indent: -28.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p16 {margin: 0.0px 0.0px 0.0px 28.0px; text-indent: -28.0px; font: 9.0px Monaco}
p.p17 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Monaco; min-height: 16.0px}
p.p18 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #a71e12}
span.s3 {font: 12.0px Monaco; color: #000000}
span.s4 {color: #0019b7}
span.s5 {color: #326f17}
span.s6 {font: 12.0px Helvetica; color: #000000}
span.s7 {font: 12.0px Helvetica}
span.s8 {color: #000000}
span.s9 {color: #0000ff}
span.s10 {font: 9.0px Monaco}
span.s11 {color: #606060}
span.s12 {font: 12.0px Monaco}
span.s13 {font: 12.0px Monaco; color: #a71e12}
span.s14 {font: 9.0px Monaco; color: #0019b7}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>Env<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>envelope specification</b></p>
<p class="p2"><br></p>
<p class="p1"><b>superclass: Object</b></p>
<p class="p2"><br></p>
<p class="p1">An Env is a specification for a segmented envelope. Envs can be used both server-side, by an <b>EnvGen </b>within a SynthDef, and clientside, with methods such as <b>at</b> and <b>asStream</b>, below. An Env can have any number of segments which can stop at a particular value or loop several segments when sustaining. An Env can have several shapes for its segments.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>Basic Creation</b></p>
<p class="p2"><br></p>
<p class="p1">*<b>new(levels, times, curves, releaseNode, loopNode)</b></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span>Create a new envelope specification.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>levels</b> - an array of levels. The first level is the initial value of the envelope.</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>times</b> - an array of durations of segments in seconds. There should be one fewer duration than there are levels.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>curve</b> - this parameter determines the shape of the envelope segments.</p>
<p class="p1"><span class="Apple-tab-span">	</span>The possible values are:</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'step' - flat segments</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'linear' - linear segments, the default</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'exponential' - natural exponential growth and decay. In this case, the levels must all be nonzero</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>and the have the same sign.</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'sine' - sinusoidal S shaped segments.</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'welch' - sinusoidal segments shaped like the sides of a Welch window.</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a Float - a curvature value for all segments.</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>An Array of Floats - curvature values for each segments.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>releaseNode</b> - an Integer or nil. The envelope will sustain at the release node until released.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>loopNode</b> - an Integer or nil. If not nil the sustain portion will loop from the releaseNode to the loop node.</p>
<p class="p2"><br></p>
<p class="p5"><br></p>
<p class="p6"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p7"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// different shaped segments:</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0,1, 0.3, 0.8, 0], [2, 3, 1, 4],<span class="s5">'linear'</span>).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0.001, 1, 0.3, 0.8, 0.001], [2, 3, 1, 4],<span class="s5">'exponential'</span>).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0, 1, 0.3, 0.8, 0], [2, 3, 1, 4],<span class="s5">'sine'</span>).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0.001, 1, 0.3, 0.8, 0.001],[2,3,1,4],<span class="s5">'welch'</span>).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0, 1, 0.3, 0.8, 0], [2, 3, 1, 4],<span class="s5">'step'</span>).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0, 1, 0.3, 0.8, 0], [2, 3, 1, 4], -2).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0, 1, 0.3, 0.8, 0], [2, 3, 1, 4], 2).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0, 1, 0.3, 0.8, 0], [2, 3, 1, 4], [0, 3, -3, -1]).test.plot;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1">If a release node is given, and the gate input of the EnvGen is set to zero, it outputs the nodes after the release node:</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//release node is node 2; releases after 5 sec</p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s4">Env</span>.new([0.001,1,0.3,0.8,0.001],[2,3,1,4] * 0.2, 2, 2).test(5).plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0.001,1,0.3,0.8,0.5,0.8,0],[2,3,1,2,2,1] * 0.2, 2, 2).test(5).plot;</p>
<p class="p7"><span class="s8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//instant release<span class="s8"><span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.new([0.001,1,0.3,0.8,0.5,0.8,0],[2,3,1,2,2,1] * 0.2, 2, 2).test(0.1).plot;<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1">If a loop node is given, the EnvGen outputs the nodes between the release node and the loop node until it is released:</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//release node is node 3, loop node is node 1</p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s4">Env</span>.new([0.001,1,0.3,0.8,0.5,0.8,0],[2,1,1,2,3,1] * 0.1, 'lin', 3, 1).test(3).plot;<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1"><b>Note:</b></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1">The starting level for an envelope segment is always the level you are at right now. For example when the gate is released and you jump to the release<span class="Apple-converted-space">  </span>segment, the level does not jump to the level at the beginning of the release segment, it changes from the whatever the current level is to the goal level of the release segment over the specified duration of the release segment.</p>
<p class="p2"><br></p>
<p class="p1">There is an extra level at the beginning of the envelope to set the initial level. After that each node is a goal level and a duration, so node zero has duration equal to times[0] and goal level equal to levels[1].</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1">The loop jumps back to the loop node. The endpoint of that segment is the goal level for that segment and the duration of<span class="Apple-converted-space">  </span>that segment will be the time over which the level changed from the current level to the goal level.</p>
<p class="p5"><br></p>
<p class="p1">*<b>newClear(numSegments)</b></p>
<p class="p2"><br></p>
<p class="p9"><span class="Apple-tab-span">	</span>Creates a new envelope specification with <b>numSegments</b> for filling in later. This can be useful when passing Env parameters as args to a <a href="../ServerArchitecture/Synth.html"><span class="s9">Synth</span></a>. Note that the maximum number of segments is fixed and cannot be changed once embedded in a <a href="../ServerArchitecture/SynthDef.html"><span class="s9">SynthDef</span></a>. Trying to set an Env with more segments than then this may result in other args being unexpectedly set.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s10">(</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">SynthDef</span>(<span class="s11">"Help-Env-newClear"</span>, { <span class="s4">arg</span> i_outbus=0, t_gate ;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> env, envctl;</p>
<p class="p7"><span class="s8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// make an empty 4 segment envelope</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>env = <span class="s4">Env</span>.newClear(4);</p>
<p class="p7"><span class="s8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// create a control argument array</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>envctl = <span class="s4">Control</span>.names([<span class="s5">\env</span>]).kr( env.asArray );</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Out</span>.ar(i_outbus, <span class="s4">SinOsc</span>.ar(<span class="s4">EnvGen</span>.kr(envctl, t_gate), 0, 0.3));</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).send(s);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.makeBundle(<span class="s4">nil</span>, {</p>
<p class="p7"><span class="s8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// must not have more segments than the env above</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e = <span class="s4">Env</span>([700,900,900,800], [1,1,1], <span class="s5">\exp</span>); <span class="s2">// 3 segments</span></p>
<p class="p10"><span class="s8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = </span><span class="s4">Synth</span><span class="s8">(</span>"Help-Env-newClear"<span class="s8">, [</span><span class="s5">\t_gate</span><span class="s8">, 1]);</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.setn(<span class="s5">\env</span>, e.asArray);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="s8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// reset then play again</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e = <span class="s4">Env</span>([800,300,400,500,200], [1,1,1,1], <span class="s5">\exp</span>); <span class="s2">// 4 segments</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.setn(<span class="s5">\env</span>, e.asArray);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.set(<span class="s5">\t_gate</span>, 1);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>Standard Shape Envelope Creation Methods</b></p>
<p class="p2"><br></p>
<p class="p1">The following class methods create some frequently used envelope shapes based on supplied durations.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1">*<b>linen(attackTime, sustainTime, releaseTime, level, curve)</b></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span> Creates a new envelope specification which has a trapezoidal shape.</p>
<p class="p1"><span class="Apple-tab-span">	</span> <b>attackTime</b> - the duration of the attack portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span> <b>sustainTime</b> - the duration of the sustain portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span> <b>releaseTime</b> - the duration of the release portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span> <b>level</b> - the level of the sustain portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span> <b>curve</b> - the curvature of the envelope.</p>
<p class="p2"><br></p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.linen(1, 2, 3, 0.6).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.linen(0.1, 0.2, 0.1, 0.6).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.linen(1, 2, 3, 0.6, <span class="s5">'sine'</span>).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.linen(1, 2, 3, 0.6, <span class="s5">'welch'</span>).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.linen(1, 2, 3, 0.6, -3).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.linen(1, 2, 3, 0.6, -3).test.plot;</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p1">*<b>triangle(duration, level)</b></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span> Creates a new envelope specification which has a triangle shape.</p>
<p class="p1"><span class="Apple-tab-span">	</span> <b>duration</b> - the duration of the envelope.</p>
<p class="p1"><span class="Apple-tab-span">	</span> <b>level</b> - the peak level of the envelope.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span> </span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.triangle(1, 1).test.plot;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">*<b>sine(duration, level)</b></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span> Creates a new envelope specification which has a hanning window shape.</p>
<p class="p1"><span class="Apple-tab-span">	</span> <b>duration</b> - the duration of the envelope.</p>
<p class="p1"><span class="Apple-tab-span">	</span> <b>level</b> - the peak level of the envelope.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span> <span class="Apple-tab-span">	</span></span><span class="s4">Env</span>.sine(1,1).test.plot;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="s2"><span class="Apple-tab-span">	</span></span><span class="Apple-tab-span">	</span></p>
<p class="p1">*<b>perc(attackTime, releaseTime, peakLevel, curve)</b></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span>Creates a new envelope specification which (usually) has a percussive shape.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>attackTime</b> - the duration of the attack portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>releaseTime</b> - the duration of the release portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>peakLevel</b> - the peak level of the envelope.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>curve</b> - the curvature of the envelope.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s4">Env</span>.perc(0.05, 1, 1, -4).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.perc(0.001, 1, 1, -4).test.plot;<span class="Apple-tab-span">	</span><span class="s2">// sharper attack</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.perc(0.001, 1, 1, -8).test.plot;<span class="Apple-tab-span">	</span><span class="s2">// change curvature</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.perc(1, 0.01, 1, 4).test.plot;<span class="Apple-tab-span">	</span><span class="s2">// reverse envelope</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p3"><b>Sustained Envelope Creation Methods</b></p>
<p class="p2"><br></p>
<p class="p1">The following methods create some frequently used envelope shapes which have a sustain segment.</p>
<p class="p2"><br></p>
<p class="p1">*<b>adsr(attackTime, decayTime, sustainLevel,<span class="Apple-converted-space">  </span>releaseTime, peakLevel, curve)</b></p>
<p class="p2"><b><span class="Apple-tab-span">	</span></b><span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span>Creates a new envelope specification which is shaped like traditional analog attack-decay-sustain-release (adsr) envelopes.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>attackTime</b> - the duration of the attack portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>decayTime</b> - the duration of the decay portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>sustainLevel</b> - the level of the sustain portion as a ratio of the peak level.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>releaseTime</b> - the duration of the release portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>peakLevel</b> - the peak level of the envelope.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>curve</b> - the curvature of the envelope.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.adsr(0.02, 0.2, 0.25, 1, 1, -4).test(2).plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.adsr(0.001, 0.2, 0.25, 1, 1, -4).test(2).plot;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="s8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//release after 0.45 sec</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.adsr(0.001, 0.2, 0.25, 1, 1, -4).test(0.45).plot;<span class="s13"><span class="Apple-tab-span">	</span></span></p>
<p class="p1">*<b>dadsr(delayTime, attackTime, decayTime, sustainLevel,<span class="Apple-converted-space">  </span>releaseTime, peakLevel, curve)</b></p>
<p class="p2"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>As <b>*adsr</b> above, but with it's onset delayed by <b>delayTime</b> in seconds. The default delay is 0.1.</p>
<p class="p13"><span class="Apple-tab-span">	</span></p>
<p class="p1">*<b>asr(attackTime, sustainLevel,<span class="Apple-converted-space">  </span>releaseTime, peakLevel, curve)</b></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span>Creates a new envelope specification which is shaped like traditional analog attack-sustain-release (asr) envelopes.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>attackTime</b> - the duration of the attack portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>sustainLevel</b> - the level of the sustain portion as a ratio of the peak level.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>releaseTime</b> - the duration of the release portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>peakLevel</b> - the peak level of the envelope.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>curve</b> - the curvature of the envelope.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.asr(0.02, 0.5, 1, 1, -4).test(2).plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.asr(0.001, 0.5, 1, 1, -4).test(2).plot; <span class="s2">// sharper attack</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.asr(0.02, 0.5, 1, 1, <span class="s5">'linear'</span>).test(2).plot; <span class="s2">// linear segments</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1">*<b>cutoff(releaseTime, level, curve)</b></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p12"><span class="Apple-tab-span">	</span>Creates a new envelope specification which has no attack segment. It simply sustains at the peak level until released. Useful if you only need a fadeout, and more versatile than <a href="../UGens/Control/Envelopes/Line.html"><span class="s9">Line</span></a>.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>releaseTime</b> - the duration of the release portion.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>level</b> - the peak level of the envelope.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>curve</b> - the curvature of the envelope.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.cutoff(1, 1).test(2).plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.cutoff(1, 1, 4).test(2).plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>.cutoff(1, 1, <span class="s5">'sine'</span>).test(2).plot;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>Instance Methods</b></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>blend(anotherEnv, blendFraction)</b></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span>Blend two envelopes. Returns a new Env.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>anotherEnv</b> - an Env.</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>blendFraction</b> - a number from zero to one.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="s12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>a = <span class="s4">Env</span>([0, 0.2, 1, 0.2, 0.2, 0], [0.5, 0.01, 0.01, 0.3, 0.2]).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s4">Env</span>([0, 0.4, 1, 0.2, 0.5, 0], [0.05, 0.4, 0.01, 0.1, 0.4]).test.plot;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Task</span>({</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>f = (0, 0.2 .. 1);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>f.do { <span class="s4">|u|</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>blend(a, b, u).test.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>2.wait;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">SCWindow</span>.allWindows.pop.close; <span class="s2">// close last opened window</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).play(<span class="s4">AppClock</span>);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p8"><br></p>
<p class="p7"><span class="s8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// in a SynthDef</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">SynthDef</span>(<span class="s11">"Help-EnvBlend"</span>, { <span class="s4">arg</span> fact = 0; </p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s4">Out</span>.ar(0, <span class="s4">EnvGen</span>.kr(<span class="s4">Env</span>.perc.blend(<span class="s4">Env</span>.sine, fact), 1.0, doneAction: 2) </p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>* <span class="s4">SinOsc</span>.ar(440,0,0.1)</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s10">) </span></p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>}).send(s));</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>f = (0, 0.1..1);</p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>f.do({<span class="s4">|fact|</span> <span class="s4">Synth</span>(<span class="s11">"Help-EnvBlend"</span>, [<span class="s5">\fact</span>, fact.postln]); 1.wait;});</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.fork;)</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>delay(delay)</b></p>
<p class="p2"><br></p>
<p class="p9"><span class="Apple-tab-span">	</span>Returns a new Env based on the receiver in which the start time has been offset by adding a silent segment at the beginning.</p>
<p class="p12"><span class="Apple-tab-span">	</span><b>delay</b> - The amount of time to delay the start of the envelope.</p>
<p class="p13"><span class="Apple-tab-span">	</span></p>
<p class="p14"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>a = <span class="s4">Env</span>.perc(0.05, 1, 1, -4);</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = a.delay(2);</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a.test.plot;</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.test.plot;</p>
<p class="p13"><br></p>
<p class="p15"><br></p>
<p class="p9"><b>circle(timeFromLastToFirst, curve)</b></p>
<p class="p15"><br></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b>circle from end to beginning over the time specified, with the curve specified.<span class="Apple-converted-space"> </span></p>
<p class="p15"><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="s4"><span class="Apple-tab-span">	</span></span>(</p>
<p class="p16"><span class="Apple-tab-span">	</span>{ <span class="s4">SinOsc</span>.ar(</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">EnvGen</span>.kr(</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>([6000, 700, 100], [1, 1], [<span class="s5">'exp'</span>, <span class="s5">'lin'</span>]).circle.postcs)</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>) * 0.1<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ <span class="s4">Impulse</span>.ar(1)<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p16"><span class="Apple-tab-span">	</span>)</p>
<p class="p8"><br></p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>{ <span class="s4">SinOsc</span>.ar(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">EnvGen</span>.kr(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Env</span>([6000, 700, 100], [1, 1], [<span class="s5">'exp'</span>, <span class="s5">'lin'</span>]).circle(1).postcs,<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">MouseX</span>.kr &gt; 0.5)</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>) * 0.1<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ <span class="s4">Impulse</span>.ar(1) }.play;</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p17"><br></p>
<p class="p1"><b>test(releaseTime)</b></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span>Test the envelope on the default <a href="../ServerArchitecture/Server.html"><span class="s9">Server</span></a> with a <a href="../UGens/Oscillators/SinOsc.html"><span class="s9">SinOsc</span></a>.</p>
<p class="p12"><span class="Apple-tab-span">	</span><b>releaseTime</b> - If this is a sustaining envelope, it will be released after this much time in seconds. The default is 3 seconds.</p>
<p class="p17"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>plot(size, bounds, minval, maxval, parent)</b></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span>Plot this envelope's shape in a window.</p>
<p class="p12"><span class="Apple-tab-span">	</span><b>size</b> - The size of the plot. The default is 400.</p>
<p class="p12"><span class="Apple-tab-span">	</span><b>bounds </b>- the size of the plot window.</p>
<p class="p18"><span class="Apple-tab-span">	</span><b>minval</b> - the minimum value in the plot. Defaults to the lowest value in the data.</p>
<p class="p18"><span class="Apple-tab-span">	</span><b>maxval</b> - the maximum value in the plot. Defaults to the highest value in the data.</p>
<p class="p18"><span class="Apple-tab-span">	</span><b>parent</b> - a window to place the plot in. If nil, one will be created for you</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>asSignal(length)</b></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span>Returns a Signal of size <b>length</b> created by sampling this Env at <b>length</b> number of intervals.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>asArray</b></p>
<p class="p2"><br></p>
<p class="p9"><span class="Apple-tab-span">	</span>Converts the Env to an Array in a specially ordered format. This allows for Env parameters to be settable arguments in a <a href="../ServerArchitecture/SynthDef.html"><span class="s9">SynthDef</span></a>. See example above under *<b>newClear</b>.</p>
<p class="p15"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>isSustained</b></p>
<p class="p2"><br></p>
<p class="p9"><span class="Apple-tab-span">	</span>Returns true if this is a sustaining envelope, false otherwise.</p>
<p class="p15"><span class="Apple-tab-span">	</span></p>
<p class="p15"><br></p>
<p class="p15"><br></p>
<p class="p2"><br></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>Client-side Access and Stream Support</b></p>
<p class="p5"><br></p>
<p class="p1">Sustain and loop settings have no effect in the methods below.</p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p1"><b>at(time)</b></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span>Returns the value of the Env at <b>time</b>.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s4">Env</span>.triangle(1, 1).at(0.5);</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>embedInStream</b></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span>Embeds this Env within an enclosing <a href="../Streams-Patterns-Events/Stream.html"><span class="s9">Stream</span></a>. Timing is derived from <span class="s14">thisThread</span><span class="s10">.beats</span>.</p>
<p class="p5"><br></p>
<p class="p1"><b>asStream</b></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span>Creates a Routine and embeds the Env in it. This allows the Env to function as a <a href="../Streams-Patterns-Events/Stream.html"><span class="s9">Stream</span></a>.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s10">(</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e = <span class="s4">Env</span>.sine.asStream;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>5.do({</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.next.postln;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.25.wait;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>})}.fork</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.42">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 20.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 20.0px Helvetica; min-height: 24.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Monaco; min-height: 17.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Monaco}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Monaco; color: #a71e12}
span.s1 {color: #0019b7}
span.s2 {color: #606060}
span.s3 {color: #000000}
span.s4 {color: #326f17}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>EZSlider<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>wrapper class for label, slider, number box</b></p>
<p class="p2"><br></p>
<p class="p3"><b>EZSlider(window, dimensions, label, controlSpec, action, initVal, initAction, labelWidth, numberWidth)</b></p>
<p class="p4"><br></p>
<p class="p3">EZSlider is a wrapper class for managing a label, slider and number box.</p>
<p class="p4"><br></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>window </b>- the SCWindow containing the views.</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>dimensions</b> - a Point giving the width and height of the combined views.</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>label</b> - a String</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>controlSpec</b> - the ControlSpec for the value.</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>action</b> - a function called when the value changes. The function is passed the EZSlider instance as its argument.</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>initVal</b> - the value to initialize the slider and number box with. If nil, then it uses the ControlSpec's default value.</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>initAction</b> - a Boolean indicating whether the action function should be called when setting the initial value. The default is false.</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>labelWidth</b> - number of pixels width for the label. default is 80.</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>numberWidth</b> - number of pixels width for the number box. default is 80.</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3">The contained views can be accessed via the EZSlider instance variables:</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>labelView</b>, <b>sliderView</b>, <b>numberView</b></p>
<p class="p4"><br></p>
<p class="p3">Another useful instance variable is <b>round</b>, the rounding precision for the number box display. The default value for <b>round</b> is 0.001 .</p>
<p class="p4"><br></p>
<p class="p5"><b>Example:</b></p>
<p class="p6"><br></p>
<p class="p7">(</p>
<p class="p8">// start server</p>
<p class="p7">s = <span class="s1">Server</span>.internal;</p>
<p class="p7"><span class="s1">Server</span>.default = s;</p>
<p class="p7">s.boot;</p>
<p class="p7">)</p>
<p class="p6"><br></p>
<p class="p7">(</p>
<p class="p8">// define a synth</p>
<p class="p7"><span class="s1">SynthDef</span>(<span class="s2">"window-test"</span>, { <span class="s1">arg</span> note = 36, fc = 1000, rq = 0.25, bal=0, amp=0.4, gate = 1;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">var</span> x;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = <span class="s1">Mix</span>.fill(4, {<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">LFSaw</span>.ar((note + {0.1.rand2}.dup).midicps, 0, 0.02)<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = <span class="s1">RLPF</span>.ar(x, fc, rq).softclip;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = <span class="s1">RLPF</span>.ar(x, fc, rq, amp).softclip;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = <span class="s1">Balance2</span>.ar(x[0], x[1], bal);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = x * <span class="s1">EnvGen</span>.kr(<span class="s1">Env</span>.cutoff, gate, doneAction: 2);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">Out</span>.ar(0, x);</p>
<p class="p7"><span class="Apple-tab-span">	</span>}, [0.1, 0.1, 0.1, 0.1, 0.1, 0]</p>
<p class="p7">).load(s);</p>
<p class="p7">)</p>
<p class="p6"><br></p>
<p class="p7">(</p>
<p class="p7"><span class="s1">var</span> w, startButton, noteControl, cutoffControl, resonControl;</p>
<p class="p7"><span class="s1">var</span> balanceControl, ampControl;</p>
<p class="p7"><span class="s1">var</span> id, cmdPeriodFunc;</p>
<p class="p6"><br></p>
<p class="p8"><span class="s3">id = s.nextNodeID; </span>// generate a note id.</p>
<p class="p6"><br></p>
<p class="p8">// make the window</p>
<p class="p7">w = <span class="s1">SCWindow</span>(<span class="s2">"another control panel"</span>, <span class="s1">Rect</span>(20, 400, 440, 180));</p>
<p class="p8"><span class="s3">w.front; </span>// make window visible and front window.</p>
<p class="p7">w.view.decorator = <span class="s1">FlowLayout</span>(w.view.bounds);</p>
<p class="p6"><br></p>
<p class="p7">w.view.background = <span class="s1">HiliteGradient</span>(<span class="s1">Color</span>.rand(0.0,1.0),<span class="s1">Color</span>.rand(0.0,1.0),</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[<span class="s4">\h</span>,<span class="s4">\v</span>].choose, 100, rrand(0.1,0.9));</p>
<p class="p6"><br></p>
<p class="p8">// add a button to start and stop the sound.</p>
<p class="p7">startButton = <span class="s1">SCButton</span>(w, 75 @ 24);</p>
<p class="p7">startButton.states = [</p>
<p class="p7"><span class="Apple-tab-span">	</span>[<span class="s2">"Start"</span>, <span class="s1">Color</span>.black, <span class="s1">Color</span>.green],</p>
<p class="p7"><span class="Apple-tab-span">	</span>[<span class="s2">"Stop"</span>, <span class="s1">Color</span>.white, <span class="s1">Color</span>.red]</p>
<p class="p7">];</p>
<p class="p7">startButton.action = {<span class="s1">|view|</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (view.value == 1) {</p>
<p class="p8"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// start sound</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.sendMsg(<span class="s2">"/s_new"</span>, <span class="s2">"window-test"</span>, id, 0, 0,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"note"</span>, noteControl.value,</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"fc"</span>, cutoffControl.value,</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"rq"</span>, resonControl.value,</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"bal"</span>, balanceControl.value,</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"amp"</span>, ampControl.value.dbamp);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (view.value == 0) {</p>
<p class="p8"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// set gate to zero to cause envelope to release</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.sendMsg(<span class="s2">"/n_set"</span>, id, <span class="s2">"gate"</span>, 0);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p7">};</p>
<p class="p6"><br></p>
<p class="p8">// create controls for all parameters</p>
<p class="p7">w.view.decorator.nextLine;</p>
<p class="p7">noteControl = <span class="s1">EZSlider</span>(w, 400 @ 24, <span class="s2">"Note"</span>, <span class="s1">ControlSpec</span>(24, 60, <span class="s4">\lin</span>, 1),<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span>{<span class="s1">|ez|</span> s.sendMsg(<span class="s2">"/n_set"</span>, id, <span class="s2">"note"</span>, ez.value); }, 36);</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p7">w.view.decorator.nextLine;</p>
<p class="p7">cutoffControl = <span class="s1">EZSlider</span>(w, 400 @ 24, <span class="s2">"Cutoff"</span>, <span class="s1">ControlSpec</span>(200, 5000, <span class="s4">\exp</span>),<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span>{<span class="s1">|ez|</span> s.sendMsg(<span class="s2">"/n_set"</span>, id, <span class="s2">"fc"</span>, ez.value); }, 1000);</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p7">w.view.decorator.nextLine;</p>
<p class="p7">resonControl = <span class="s1">EZSlider</span>(w, 400 @ 24, <span class="s2">"Resonance"</span>, <span class="s1">ControlSpec</span>(0.1, 0.7),<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span>{<span class="s1">|ez|</span> s.sendMsg(<span class="s2">"/n_set"</span>, id, <span class="s2">"rq"</span>, ez.value); }, 0.2);</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p7">w.view.decorator.nextLine;</p>
<p class="p7">balanceControl = <span class="s1">EZSlider</span>(w, 400 @ 24, <span class="s2">"Balance"</span>, <span class="s4">\bipolar</span>,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span>{<span class="s1">|ez|</span> s.sendMsg(<span class="s2">"/n_set"</span>, id, <span class="s2">"bal"</span>, ez.value); }, 0);</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p7">w.view.decorator.nextLine;</p>
<p class="p7">ampControl = <span class="s1">EZSlider</span>(w, 400 @ 24, <span class="s2">"Amp"</span>, <span class="s4">\db</span>,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span>{<span class="s1">|ez|</span> s.sendMsg(<span class="s2">"/n_set"</span>, id, <span class="s2">"amp"</span>, ez.value.dbamp); }, -6);</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p6"><br></p>
<p class="p8">// set start button to zero upon a cmd-period</p>
<p class="p7">cmdPeriodFunc = { startButton.value = 0; };</p>
<p class="p7"><span class="s1">CmdPeriod</span>.add(cmdPeriodFunc);</p>
<p class="p6"><br></p>
<p class="p8">// stop the sound when window closes and remove cmdPeriodFunc.</p>
<p class="p7">w.onClose = {</p>
<p class="p7"><span class="Apple-tab-span">	</span>s.sendMsg(<span class="s2">"/n_free"</span>, id);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="s1">CmdPeriod</span>.remove(cmdPeriodFunc);</p>
<p class="p7">};</p>
<p class="p6"><br></p>
<p class="p7">)</p>
</body>
</html>
